˝ô
XC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AccountController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
AccountController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IUserService %
_service& .
;. /
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
ILogger  
_logger! (
;( )
public 
AccountController  
(  !
IUserService! -
service. 5
,5 6
IConfiguration7 E
configurationF S
,S T
ILoggerU \
<\ ]
AccountController] n
>n o
loggerp v
)v w
{ 	
_service 
= 
service 
; 
_configuration 
= 
configuration *
;* +
_logger   
=   
logger   
;   
}!! 	
[## 	
	Authorize##	 
]## 
[$$ 	
HttpPut$$	 
($$ 
$str$$  
)$$  !
]$$! "
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
>%%& '
Update%%( .
(%%. /
[%%/ 0
FromBody%%0 8
]%%8 9
UserDto%%9 @
user%%A E
,%%E F
string%%G M
	returnUrl%%N W
)%%W X
{&& 	
var'' 
id'' 
='' 
await'' 
_service'' #
.''# $
GetUserIdByUsername''$ 7
(''7 8
User''8 <
.''< =
Identity''= E
.''E F
Name''F J
)''J K
;''K L
if(( 
((( 
id(( 
!=(( 
user(( 
.(( 
Id(( 
)(( 
{)) 
return** 

BadRequest** !
(**! "
)**" #
;**# $
}++ 
try,, 
{-- 
await.. 
_service.. 
... 
UpdateProfile.. ,
(.., -
user..- 1
,..1 2
	returnUrl..3 <
)..< =
;..= >
return// 
Ok// 
(// 
$str// 4
)//4 5
;//5 6
}00 
catch11 
(11 %
InvalidOperationException11 ,
ex11- /
)11/ 0
{22 
return33 

BadRequest33 !
(33! "
ex33" $
.33$ %
Message33% ,
)33, -
;33- .
}44 
catch55 
(55 !
ObjectUpdateException55 (
ex55) +
)55+ ,
{66 
return77 

BadRequest77 !
(77! "
ex77" $
.77$ %
ToString77% -
(77- .
)77. /
)77/ 0
;770 1
}88 
catch99 
(99 
	Exception99 
ex99 
)99  
{:: 
return;; 

BadRequest;; !
(;;! "
ex;;" $
.;;$ %
Message;;% ,
);;, -
;;;- .
}<< 
}== 	
[?? 	
HttpPost??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
Login@@) .
(@@. /
[@@/ 0
FromBody@@0 8
]@@8 9
UserLoginDto@@9 E
user@@F J
)@@J K
{AA 	
tryBB 
{CC 
varDD 
tokensDD 
=DD 
awaitDD "
_serviceDD# +
.DD+ ,

LoginAsyncDD, 6
(DD6 7
userDD7 ;
)DD; <
;DD< =
varEE 
	userRolesEE 
=EE 
awaitEE  %
_serviceEE& .
.EE. /
GetUserRolesEE/ ;
(EE; <
userEE< @
.EE@ A
EmailEEA F
)EEF G
;EEG H
CookieHelperFF 
.FF 
CreateCookieFF )
(FF) *
_configurationFF* 8
,FF8 9
HttpContextFF: E
.FFE F
ResponseFFF N
,FFN O
userFFP T
.FFT U

RememberMeFFU _
,FF_ `
tokensFFa g
)FFg h
;FFh i
returnGG 
OkGG 
(GG 
	userRolesGG #
)GG# $
;GG$ %
}HH 
catchII 
(II 
LoginExceptionII !
exII" $
)II$ %
{JJ 
returnKK 

BadRequestKK !
(KK! "
exKK" $
.KK$ %
ToStringKK% -
(KK- .
)KK. /
)KK/ 0
;KK0 1
}LL 
catchMM 
(MM #
ObjectNotFoundExceptionMM *
exMM+ -
)MM- .
{NN 
returnOO 

BadRequestOO !
(OO! "
exOO" $
.OO$ %
ToStringOO% -
(OO- .
)OO. /
)OO/ 0
;OO0 1
}PP 
catchQQ 
(QQ 
IOExceptionQQ 
exQQ !
)QQ! "
{RR 
returnSS 

BadRequestSS !
(SS! "
exSS" $
.SS$ %
MessageSS% ,
)SS, -
;SS- .
}TT 
catchUU 
(UU 
	ExceptionUU 
exUU 
)UU  
{VV 
returnWW 

BadRequestWW !
(WW! "
exWW" $
.WW$ %
MessageWW% ,
)WW, -
;WW- .
}XX 
}YY 	
[[[ 	
HttpPost[[	 
([[ 
$str[[ 
)[[ 
][[ 
public\\ 
IActionResult\\ 
Logout\\ #
(\\# $
)\\$ %
{]] 	
try^^ 
{__ 
CookieHelper`` 
.`` 
CleanCookies`` )
(``) *
_configuration``* 8
,``8 9
HttpContext``: E
.``E F
Response``F N
)``N O
;``O P
returnaa 
	NoContentaa  
(aa  !
)aa! "
;aa" #
}bb 
catchcc 
(cc 
	Exceptioncc 
excc 
)cc 
{dd 
returnee 

BadRequestee !
(ee! "
exee" $
.ee$ %
Messageee% ,
)ee, -
;ee- .
}ff 
}hh 	
[jj 	
HttpPostjj	 
(jj 
$strjj 
)jj 
]jj 
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (
Registerkk) 1
(kk1 2
[kk2 3
FromBodykk3 ;
]kk; <
UserRegistrationDtokk< O
userkkP T
,kkT U
stringkkV \
	returnUrlkk] f
)kkf g
{ll 	
trymm 
{nn 
newoo &
RegistrationModelValidatoroo .
(oo. /
useroo/ 3
)oo3 4
.oo4 5
ValidateModeloo5 B
(ooB C
)ooC D
;ooD E
awaitpp 
_servicepp 
.pp 
RegisterAsyncpp ,
(pp, -
userpp- 1
,pp1 2
	returnUrlpp3 <
)pp< =
;pp= >
returnqq 
Acceptedqq 
(qq  
)qq  !
;qq! "
}rr 
catchss 
(ss 
RegisterExceptionss $
exss% '
)ss' (
{tt 
returnuu 

BadRequestuu !
(uu! "
exuu" $
.uu$ %
ToStringuu% -
(uu- .
)uu. /
)uu/ 0
;uu0 1
}vv 
catchww 
(ww 
ArgumentExceptionww $
exww% '
)ww' (
{xx 
returnyy 

BadRequestyy !
(yy! "
exyy" $
.yy$ %
Messageyy% ,
)yy, -
;yy- .
}zz 
catch{{ 
({{ 
ValidationException{{ &
ex{{' )
){{) *
{|| 
return}} 

BadRequest}} !
(}}! "
ex}}" $
.}}$ %
ToString}}% -
(}}- .
)}}. /
)}}/ 0
;}}0 1
}~~ 
catch 
( 
IOException 
ex !
)! "
{
ÄÄ 
return
ÅÅ 

BadRequest
ÅÅ !
(
ÅÅ! "
ex
ÅÅ" $
.
ÅÅ$ %
Message
ÅÅ% ,
)
ÅÅ, -
;
ÅÅ- .
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ  
SendEmailException
ÉÉ %
ex
ÉÉ& (
)
ÉÉ( )
{
ÑÑ 
return
ÖÖ 

BadRequest
ÖÖ !
(
ÖÖ! "
ex
ÖÖ" $
.
ÖÖ$ %
ToString
ÖÖ% -
(
ÖÖ- .
)
ÖÖ. /
)
ÖÖ/ 0
;
ÖÖ0 1
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
ex
áá 
)
áá  
{
àà 
return
ââ 

BadRequest
ââ !
(
ââ! "
ex
ââ" $
.
ââ$ %
Message
ââ% ,
)
ââ, -
;
ââ- .
}
ää 
}
ãã 	
[
çç 	
HttpGet
çç	 
(
çç 
$str
çç 
)
çç 
]
çç 
public
éé 
async
éé 
Task
éé 
ConfirmEmail
éé &
(
éé& '
string
éé' -
userId
éé. 4
,
éé4 5
string
éé6 <
token
éé= B
,
ééB C
string
ééD J
	returnUrl
ééK T
)
ééT U
{
èè 	
try
êê 
{
ëë 
await
íí 
_service
íí 
.
íí 
ConfirmEmailAsync
íí 0
(
íí0 1
userId
íí1 7
,
íí7 8
token
íí9 >
)
íí> ?
;
íí? @
Response
ìì 
.
ìì 
Redirect
ìì !
(
ìì! "
	returnUrl
ìì" +
)
ìì+ ,
;
ìì, -
}
îî 
catch
ïï 
(
ïï %
ObjectNotFoundException
ïï )
ex
ïï* ,
)
ïï, -
{
ññ 
Response
óó 
.
óó 

StatusCode
óó #
=
óó$ %
(
óó% &
int
óó& )
)
óó) *
HttpStatusCode
óó* 8
.
óó8 9

BadRequest
óó9 C
;
óóC D
await
òò 
Response
òò 
.
òò 

WriteAsync
òò )
(
òò) *
ex
òò* ,
.
òò, -
ToString
òò- 5
(
òò5 6
)
òò6 7
)
òò7 8
;
òò8 9
}
ôô 
catch
öö 
(
öö #
ObjectUpdateException
öö '
ex
öö( *
)
öö* +
{
õõ 
Response
úú 
.
úú 

StatusCode
úú #
=
úú$ %
(
úú& '
int
úú' *
)
úú* +
HttpStatusCode
úú+ 9
.
úú9 :

BadRequest
úú: D
;
úúD E
await
ùù 
Response
ùù 
.
ùù 

WriteAsync
ùù )
(
ùù) *
ex
ùù* ,
.
ùù, -
ToString
ùù- 5
(
ùù5 6
)
ùù6 7
)
ùù7 8
;
ùù8 9
}
ûû 
catch
üü 
(
üü 
ArgumentException
üü #
ex
üü$ &
)
üü& '
{
†† 
Response
°° 
.
°° 

StatusCode
°° #
=
°°$ %
(
°°& '
int
°°' *
)
°°* +
HttpStatusCode
°°+ 9
.
°°9 :

BadRequest
°°: D
;
°°D E
await
¢¢ 
Response
¢¢ 
.
¢¢ 

WriteAsync
¢¢ )
(
¢¢) *
ex
¢¢* ,
.
¢¢, -
ToString
¢¢- 5
(
¢¢5 6
)
¢¢6 7
)
¢¢7 8
;
¢¢8 9
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
ex
§§ 
)
§§  
{
•• 
Response
¶¶ 
.
¶¶ 

StatusCode
¶¶ #
=
¶¶$ %
(
¶¶& '
int
¶¶' *
)
¶¶* +
HttpStatusCode
¶¶+ 9
.
¶¶9 :

BadRequest
¶¶: D
;
¶¶D E
await
ßß 
Response
ßß 
.
ßß 

WriteAsync
ßß )
(
ßß) *
ex
ßß* ,
.
ßß, -
ToString
ßß- 5
(
ßß5 6
)
ßß6 7
)
ßß7 8
;
ßß8 9
}
®® 
}
©© 	
[
´´ 	
HttpPost
´´	 
(
´´ 
$str
´´ 
)
´´ 
]
´´ 
public
¨¨ 
async
¨¨ 
Task
¨¨ 
<
¨¨ 
IActionResult
¨¨ '
>
¨¨' (
ForgotPassword
¨¨) 7
(
¨¨7 8
[
¨¨8 9
FromBody
¨¨9 A
]
¨¨A B
ResetPasswordDto
¨¨B R
resetPasswordDto
¨¨S c
,
¨¨c d
string
¨¨e k
	returnUrl
¨¨l u
)
¨¨u v
{
≠≠ 	
try
ÆÆ 
{
ØØ 
await
∞∞ 
_service
∞∞ 
.
∞∞ !
ForgotPasswordAsync
∞∞ 2
(
∞∞2 3
resetPasswordDto
∞∞3 C
,
∞∞C D
	returnUrl
∞∞E N
)
∞∞N O
;
∞∞O P
return
±± 
Accepted
±± 
(
±±  
)
±±  !
;
±±! "
}
≤≤ 
catch
≥≥ 
(
≥≥ %
ObjectNotFoundException
≥≥ *
ex
≥≥+ -
)
≥≥- .
{
¥¥ 
return
µµ 

BadRequest
µµ !
(
µµ! "
ex
µµ" $
.
µµ$ %
ToString
µµ% -
(
µµ- .
)
µµ. /
)
µµ/ 0
;
µµ0 1
}
∂∂ 
catch
∑∑ 
(
∑∑ 
ArgumentException
∑∑ $
ex
∑∑% '
)
∑∑' (
{
∏∏ 
return
ππ 

BadRequest
ππ !
(
ππ! "
ex
ππ" $
.
ππ$ %
Message
ππ% ,
)
ππ, -
;
ππ- .
}
∫∫ 
catch
ªª 
(
ªª 
IOException
ªª 
ex
ªª !
)
ªª! "
{
ºº 
return
ΩΩ 

BadRequest
ΩΩ !
(
ΩΩ! "
ex
ΩΩ" $
)
ΩΩ$ %
;
ΩΩ% &
}
ææ 
catch
øø 
(
øø  
SendEmailException
øø %
ex
øø& (
)
øø( )
{
¿¿ 
return
¡¡ 

BadRequest
¡¡ !
(
¡¡! "
ex
¡¡" $
.
¡¡$ %
ToString
¡¡% -
(
¡¡- .
)
¡¡. /
)
¡¡/ 0
;
¡¡0 1
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√  
{
ƒƒ 
return
≈≈ 

BadRequest
≈≈ !
(
≈≈! "
ex
≈≈" $
.
≈≈$ %
Message
≈≈% ,
)
≈≈, -
;
≈≈- .
}
∆∆ 
}
«« 	
[
…… 	
HttpPost
……	 
(
…… 
$str
…… 
)
…… 
]
…… 
public
   
async
   
Task
   
<
   
IActionResult
   '
>
  ' (
ResetPassword
  ) 6
(
  6 7
[
  7 8
FromBody
  8 @
]
  @ A%
ResetPasswordConfirmDto
  A X
resetPasswordDto
  Y i
)
  i j
{
ÀÀ 	
try
ÃÃ 
{
ÕÕ 
new
ŒŒ 
PasswordValidator
ŒŒ %
(
ŒŒ% &
resetPasswordDto
ŒŒ& 6
.
ŒŒ6 7
Password
ŒŒ7 ?
,
ŒŒ? @
resetPasswordDto
ŒŒA Q
.
ŒŒQ R
ConfirmPassword
ŒŒR a
)
ŒŒa b
.
ŒŒb c
Validate
ŒŒc k
(
ŒŒk l
)
ŒŒl m
;
ŒŒm n
await
œœ 
_service
œœ 
.
œœ  
ResetPasswordAsync
œœ 1
(
œœ1 2
resetPasswordDto
œœ2 B
)
œœB C
;
œœC D
return
–– 
Ok
–– 
(
–– 
)
–– 
;
–– 
}
—— 
catch
““ 
(
““ %
ObjectNotFoundException
““ *
ex
““+ -
)
““- .
{
”” 
return
‘‘ 

BadRequest
‘‘ !
(
‘‘! "
ex
‘‘" $
.
‘‘$ %
ToString
‘‘% -
(
‘‘- .
)
‘‘. /
)
‘‘/ 0
;
‘‘0 1
}
’’ 
catch
÷÷ 
(
÷÷ #
ObjectUpdateException
÷÷ (
ex
÷÷) +
)
÷÷+ ,
{
◊◊ 
return
ÿÿ 

BadRequest
ÿÿ !
(
ÿÿ! "
ex
ÿÿ" $
.
ÿÿ$ %
ToString
ÿÿ% -
(
ÿÿ- .
)
ÿÿ. /
)
ÿÿ/ 0
;
ÿÿ0 1
}
ŸŸ 
catch
⁄⁄ 
(
⁄⁄ 
ArgumentException
⁄⁄ $
ex
⁄⁄% '
)
⁄⁄' (
{
€€ 
return
‹‹ 

BadRequest
‹‹ !
(
‹‹! "
ex
‹‹" $
.
‹‹$ %
Message
‹‹% ,
)
‹‹, -
;
‹‹- .
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ !
ValidationException
ﬁﬁ &
ex
ﬁﬁ' )
)
ﬁﬁ) *
{
ﬂﬂ 
return
‡‡ 

BadRequest
‡‡ !
(
‡‡! "
ex
‡‡" $
.
‡‡$ %
ToString
‡‡% -
(
‡‡- .
)
‡‡. /
)
‡‡/ 0
;
‡‡0 1
}
·· 
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
ex
‚‚ 
)
‚‚  
{
„„ 
return
‰‰ 

BadRequest
‰‰ !
(
‰‰! "
ex
‰‰" $
.
‰‰$ %
Message
‰‰% ,
)
‰‰, -
;
‰‰- .
}
ÂÂ 
}
ÊÊ 	
[
ËË 	
	Authorize
ËË	 
]
ËË 
[
ÈÈ 	

HttpDelete
ÈÈ	 
(
ÈÈ 
$str
ÈÈ #
)
ÈÈ# $
]
ÈÈ$ %
public
ÍÍ 
async
ÍÍ 
Task
ÍÍ 
<
ÍÍ 
ActionResult
ÍÍ &
>
ÍÍ& '
Delete
ÍÍ( .
(
ÍÍ. /
)
ÍÍ/ 0
{
ÎÎ 	
try
ÏÏ 
{
ÌÌ 
var
ÓÓ 
	userEmail
ÓÓ 
=
ÓÓ 
User
ÓÓ  $
.
ÓÓ$ %
Identity
ÓÓ% -
.
ÓÓ- .
Name
ÓÓ. 2
;
ÓÓ2 3
await
ÔÔ 
_service
ÔÔ 
.
ÔÔ 
DeleteProfile
ÔÔ ,
(
ÔÔ, -
	userEmail
ÔÔ- 6
)
ÔÔ6 7
;
ÔÔ7 8
return
 
Ok
 
(
 
$str
 8
)
8 9
;
9 :
}
ÒÒ 
catch
ÚÚ 
(
ÚÚ %
ObjectNotFoundException
ÚÚ *
ex
ÚÚ+ -
)
ÚÚ- .
{
ÛÛ 
return
ÙÙ 
NotFound
ÙÙ 
(
ÙÙ  
ex
ÙÙ  "
.
ÙÙ" #
Message
ÙÙ# *
)
ÙÙ* +
;
ÙÙ+ ,
}
ıı 
catch
ˆˆ 
(
ˆˆ '
InvalidOperationException
ˆˆ ,
ex
ˆˆ- /
)
ˆˆ/ 0
{
˜˜ 
return
¯¯ 

BadRequest
¯¯ !
(
¯¯! "
ex
¯¯" $
.
¯¯$ %
Message
¯¯% ,
)
¯¯, -
;
¯¯- .
}
˘˘ 
catch
˙˙ 
(
˙˙ 
	Exception
˙˙ 
ex
˙˙ 
)
˙˙  
{
˚˚ 
return
¸¸ 

BadRequest
¸¸ !
(
¸¸! "
ex
¸¸" $
.
¸¸$ %
Message
¸¸% ,
)
¸¸, -
;
¸¸- .
}
˝˝ 
}
˛˛ 	
}
ˇˇ 
}ÄÄ ™

XC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AddressController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
AddressController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IAddressService (
_addressService) 8
;8 9
public 
AddressController  
(  !
IAddressService! 0
addressService1 ?
)? @
{ 	
_addressService 
= 
addressService ,
;, -
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &

AddressDto& 0
>0 1
>1 2
GetAddresses3 ?
(? @
)@ A
{ 	
return 
await 
_addressService (
.( )
GetAllAddresses) 8
(8 9
)9 :
;: ;
} 	
} 
} Ë]
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AdminController.cs
	namespace

 	
Api


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
AdminController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IMainAdminService *
_adminService+ 8
;8 9
public 
AdminController 
( 
IMainAdminService 0
adminService1 =
)= >
{ 	
_adminService 
= 
adminService (
;( )
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str '
)' (
]( )
[ 	

HttpDelete	 
( 
$str &
)& '
]' (
public 
async 
Task 
< 
IActionResult '
>' (

DeleteUser) 3
(3 4
string4 :
id; =
)= >
{ 	
try 
{ 
await 
_adminService #
.# $

DeleteUser$ .
(. /
id/ 1
)1 2
;2 3
return 
Ok 
( 
) 
; 
} 
catch 
( 
ArgumentException $
ex% '
)' (
{   
return!! 

BadRequest!! !
(!!! "
ex!!" $
.!!$ %
Message!!% ,
)!!, -
;!!- .
}"" 
catch## 
(## #
ObjectNotFoundException## *
ex##+ -
)##- .
{$$ 
return%% 

BadRequest%% !
(%%! "
ex%%" $
.%%$ %
ToString%%% -
(%%- .
)%%. /
)%%/ 0
;%%0 1
}&& 
catch'' 
('' !
ObjectDeleteException'' (
ex'') +
)''+ ,
{(( 
return)) 

BadRequest)) !
())! "
ex))" $
.))$ %
ToString))% -
())- .
))). /
)))/ 0
;))0 1
}** 
catch++ 
(++ 
	Exception++ 
ex++ 
)++  
{,, 
return-- 

BadRequest-- !
(--! "
ex--" $
.--$ %
Message--% ,
)--, -
;--- .
}.. 
}00 	
[22 	
	Authorize22	 
(22 
Roles22 
=22 
$str22 -
)22- .
]22. /
[33 	
HttpGet33	 
(33 
$str33 (
)33( )
]33) *
public44 
async44 
Task44 
<44 
ActionResult44 &
<44& '
IEnumerable44' 2
<442 3
UserDto443 :
>44: ;
>44; <
>44< =
GetUsers44> F
(44F G
string44G M
role44N R
)44R S
{55 	
try66 
{77 
var88 
users88 
=88 
await88 !
_adminService88" /
.88/ 0
GetUsersInRole880 >
(88> ?
role88? C
)88C D
;88D E
return99 
Ok99 
(99 
users99 
)99  
;99  !
}:: 
catch;; 
(;; !
ArgumentNullException;; (
ex;;) +
);;+ ,
{<< 
return== 

BadRequest== !
(==! "
ex==" $
.==$ %
Message==% ,
)==, -
;==- .
}>> 
catch?? 
(?? 
RoleException??  
ex??! #
)??# $
{@@ 
returnAA 

BadRequestAA !
(AA! "
exAA" $
.AA$ %
ToStringAA% -
(AA- .
)AA. /
)AA/ 0
;AA0 1
}BB 
catchCC 
(CC 
	ExceptionCC 
exCC 
)CC  
{DD 
returnEE 

BadRequestEE !
(EE! "
exEE" $
.EE$ %
MessageEE% ,
)EE, -
;EE- .
}FF 
}GG 	
[II 	
	AuthorizeII	 
(II 
RolesII 
=II 
$strII -
)II- .
]II. /
[JJ 	
HttpGetJJ	 
(JJ 
$strJJ 
)JJ 
]JJ 
publicKK 
ActionResultKK 
<KK 
IEnumerableKK '
<KK' ( 
UserIncludeValuesDtoKK( <
>KK< =
>KK= >
GetUsersKK? G
(KKG H
)KKH I
{LL 	
tryMM 
{NN 
varOO 
usersOO 
=OO 
_adminServiceOO )
.OO) *
GetUsersOO* 2
(OO2 3
)OO3 4
;OO4 5
returnPP 
OkPP 
(PP 
usersPP 
)PP  
;PP  !
}QQ 
catchRR 
(RR 
	ExceptionRR 
exRR 
)RR  
{SS 
returnTT 

BadRequestTT !
(TT! "
exTT" $
.TT$ %
MessageTT% ,
)TT, -
;TT- .
}UU 
}VV 	
[XX 	
	AuthorizeXX	 
(XX 
RolesXX 
=XX 
$strXX -
)XX- .
]XX. /
[YY 	
HttpGetYY	 
(YY 
$strYY -
)YY- .
]YY. /
publicZZ 
ActionResultZZ 
<ZZ 
IEnumerableZZ '
<ZZ' ( 
UserIncludeValuesDtoZZ( <
>ZZ< =
>ZZ= >
GetUsersByNameZZ? M
(ZZM N
stringZZN T
nameZZU Y
)ZZY Z
{[[ 	
try\\ 
{]] 
var^^ 
users^^ 
=^^ 
_adminService^^ )
.^^) *
GetUsersByName^^* 8
(^^8 9
name^^9 =
)^^= >
;^^> ?
return__ 
Ok__ 
(__ 
users__ 
)__  
;__  !
}`` 
catchaa 
(aa !
ArgumentNullExceptionaa (
exaa) +
)aa+ ,
{bb 
returncc 

BadRequestcc !
(cc! "
excc" $
.cc$ %
Messagecc% ,
)cc, -
;cc- .
}dd 
catchee 
(ee 
	Exceptionee 
exee 
)ee  
{ff 
returngg 

BadRequestgg !
(gg! "
exgg" $
.gg$ %
Messagegg% ,
)gg, -
;gg- .
}hh 
}ii 	
[kk 	
	Authorizekk	 
(kk 
Roleskk 
=kk 
$strkk -
)kk- .
]kk. /
[ll 	
HttpGetll	 
(ll 
$strll 5
)ll5 6
]ll6 7
publicmm 
ActionResultmm 
<mm 
IEnumerablemm '
<mm' ( 
UserIncludeValuesDtomm( <
>mm< =
>mm= >
GetUsersByLocationmm? Q
(mmQ R
longmmR V

locationIdmmW a
)mma b
{nn 	
tryoo 
{pp 
varqq 
usersqq 
=qq 
_adminServiceqq )
.qq) *
GetUsersByLocationqq* <
(qq< =

locationIdqq= G
)qqG H
;qqH I
returnrr 
Okrr 
(rr 
usersrr 
)rr  
;rr  !
}ss 
catchtt 
(tt 
ArgumentExceptiontt $
extt% '
)tt' (
{uu 
returnvv 

BadRequestvv !
(vv! "
exvv" $
.vv$ %
Messagevv% ,
)vv, -
;vv- .
}ww 
catchxx 
(xx 
	Exceptionxx 
exxx 
)xx  
{yy 
returnzz 

BadRequestzz !
(zz! "
exzz" $
.zz$ %
Messagezz% ,
)zz, -
;zz- .
}{{ 
}|| 	
[~~ 	
	Authorize~~	 
(~~ 
Roles~~ 
=~~ 
$str~~ -
)~~- .
]~~. /
[ 	
HttpGet	 
( 
$str .
). /
]/ 0
public
ÄÄ 
ActionResult
ÄÄ 
<
ÄÄ "
UserIncludeValuesDto
ÄÄ 0
>
ÄÄ0 1
GetUserByEmail
ÄÄ2 @
(
ÄÄ@ A
string
ÄÄA G
email
ÄÄH M
)
ÄÄM N
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
var
ÑÑ 
user
ÑÑ 
=
ÑÑ 
_adminService
ÑÑ (
.
ÑÑ( )
GetUserByEmail
ÑÑ) 7
(
ÑÑ7 8
email
ÑÑ8 =
)
ÑÑ= >
;
ÑÑ> ?
return
ÖÖ 
Ok
ÖÖ 
(
ÖÖ 
user
ÖÖ 
)
ÖÖ 
;
ÖÖ  
}
ÜÜ 
catch
áá 
(
áá #
ArgumentNullException
áá (
ex
áá) +
)
áá+ ,
{
àà 
return
ââ 

BadRequest
ââ !
(
ââ! "
ex
ââ" $
.
ââ$ %
Message
ââ% ,
)
ââ, -
;
ââ- .
}
ää 
catch
ãã 
(
ãã %
ObjectNotFoundException
ãã *
ex
ãã+ -
)
ãã- .
{
åå 
return
çç 

BadRequest
çç !
(
çç! "
ex
çç" $
.
çç$ %
ToString
çç% -
(
çç- .
)
çç. /
)
çç/ 0
;
çç0 1
}
éé 
catch
èè 
(
èè 
	Exception
èè 
ex
èè 
)
èè  
{
êê 
return
ëë 

BadRequest
ëë !
(
ëë! "
ex
ëë" $
.
ëë$ %
Message
ëë% ,
)
ëë, -
;
ëë- .
}
íí 
}
ìì 	
[
ïï 	
	Authorize
ïï	 
(
ïï 
Roles
ïï 
=
ïï 
$str
ïï -
)
ïï- .
]
ïï. /
[
ññ 	
HttpGet
ññ	 
(
ññ 
$str
ññ ;
)
ññ; <
]
ññ< =
public
óó 
ActionResult
óó 
<
óó 
IEnumerable
óó '
<
óó' ("
UserIncludeValuesDto
óó( <
>
óó< =
>
óó= >"
GetUserByPhoneNumber
óó? S
(
óóS T
string
óóT Z
phoneNumber
óó[ f
)
óóf g
{
òò 	
try
ôô 
{
öö 
var
õõ 
user
õõ 
=
õõ 
_adminService
õõ (
.
õõ( )"
GetUserByPhoneNumber
õõ) =
(
õõ= >
phoneNumber
õõ> I
)
õõI J
;
õõJ K
return
úú 
Ok
úú 
(
úú 
user
úú 
)
úú 
;
úú  
}
ùù 
catch
ûû 
(
ûû #
ArgumentNullException
ûû '
ex
ûû( *
)
ûû* +
{
üü 
return
†† 

BadRequest
†† !
(
††! "
ex
††" $
.
††$ %
Message
††% ,
)
††, -
;
††- .
}
°° 
catch
¢¢ 
(
¢¢ %
ObjectNotFoundException
¢¢ *
ex
¢¢+ -
)
¢¢- .
{
££ 
return
§§ 

BadRequest
§§ !
(
§§! "
ex
§§" $
.
§§$ %
ToString
§§% -
(
§§- .
)
§§. /
)
§§/ 0
;
§§0 1
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
ex
¶¶ 
)
¶¶  
{
ßß 
return
®® 

BadRequest
®® !
(
®®! "
ex
®®" $
.
®®$ %
Message
®®% ,
)
®®, -
;
®®- .
}
©© 
}
™™ 	
}
´´ 
}¨¨ ¥ 
aC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AdoptBookRequestController.cs
	namespace 	
Api
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class &
AdoptBookRequestController +
:, -

Controller. 8
{ 
private 
readonly $
IAdoptBookRequestService 1$
_adoptBookRequestService2 J
;J K
public &
AdoptBookRequestController )
() *$
IAdoptBookRequestService* B#
adoptBookRequestServiceC Z
)Z [
{ 	$
_adoptBookRequestService $
=% &#
adoptBookRequestService' >
;> ?
} 	
[ 	
HttpGet	 
] 
[ 	
	Authorize	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
AdoptBookRequest' 7
>7 8
>8 9
GetAll: @
(@ A
)A B
{ 	
try 
{ 
var 
adoptBookRequests %
=& '
await( -$
_adoptBookRequestService. F
.F G'
GetAllAdoptBookRequestAsyncG b
(b c
)c d
;d e
return 
Ok 
( 
adoptBookRequests +
)+ ,
;, -
} 
catch 
( 
	Exception 
ex 
)  
{ 
return 

BadRequest !
(! "
ex" $
.$ %
Message% ,
), -
;- .
}   
}!! 	
["" 	
HttpGet""	 
]"" 
[## 	
	Authorize##	 
(## 
Roles## 
=## 
$str## -
)##- .
]##. /
[$$ 	
Route$$	 
($$ 
$str$$ '
)$$' (
]$$( )
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
<%%& '
AdoptBookRequest%%' 7
>%%7 8
>%%8 9
GetAllDeclined%%: H
(%%H I
string%%I O
	userEmail%%P Y
)%%Y Z
{&& 	
try'' 
{(( 
var)) 
adoptBookRequests)) %
=))& '
await))( -$
_adoptBookRequestService)). F
.))F G/
#GetAllAdoptBookDeclinedRequestAsync))G j
())j k
	userEmail))k t
)))t u
;))u v
return** 
Ok** 
(** 
adoptBookRequests** +
)**+ ,
;**, -
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
return// 

BadRequest// !
(//! "
ex//" $
.//$ %
Message//% ,
)//, -
;//- .
}00 
}11 	
[22 	

HttpDelete22	 
]22 
[33 	
	Authorize33	 
]33 
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' ("
DeleteAdoptBookRequest44) ?
(44? @%
AdoptBookRequestForDelete44@ Y
adoptBookRequest44Z j
)44j k
{55 	
try66 
{77 
await88 $
_adoptBookRequestService88 .
.88. /"
DeleteAdoptBookRequest88/ E
(88E F
adoptBookRequest88F V
)88V W
;88W X
return99 
Ok99 
(99 
)99 
;99 
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);;  
{<< 
return== 

BadRequest== !
(==! "
ex==" $
.==$ %
Message==% ,
)==, -
;==- .
}>> 
}?? 	
}@@ 
}AA úZ
[C:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AdoptOrderController.cs
	namespace

 	
Api


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class  
AdoptOrderController %
:& '
ControllerBase( 6
{ 
private 
readonly 
IAdoptOrderService +
_adoptOrderService, >
;> ?
public  
AdoptOrderController #
(# $
IAdoptOrderService$ 6
adoptOrderService7 H
)H I
{ 	
_adoptOrderService 
=  
adoptOrderService! 2
;2 3
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str -
)- .
]. /
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str !
)! "
]" #
public 
async 
Task 
< 
ActionResult &
>& '
AppoveAdoptOrder( 8
(8 9#
AdoptOrderForApproveDto9 P

adoptOrderQ [
)[ \
{ 	
if 
( 

adoptOrder 
== 
null "
)" #
{ 
return 

BadRequest !
(! "
)" #
;# $
} 
try 
{   
await!! 
_adoptOrderService!! (
.!!( )
ApproveAdoptOrder!!) :
(!!: ;

adoptOrder!!; E
)!!E F
;!!F G
return"" 
Ok"" 
("" 
)"" 
;"" 
}## 
catch$$ 
($$ 
	Exception$$ 
ex$$ 
)$$  
{%% 
return&& 

BadRequest&& !
(&&! "
ex&&" $
.&&$ %
Message&&% ,
)&&, -
;&&- .
}'' 
}(( 	
[)) 	
	Authorize))	 
()) 
Roles)) 
=)) 
$str)) -
)))- .
])). /
[** 	
HttpPost**	 
]** 
[++ 	
Route++	 
(++ 
$str++ '
)++' (
]++( )
public,, 
async,, 
Task,, 
<,, 
ActionResult,, &
>,,& '"
AppoveFinalyAdoptOrder,,( >
(,,> ?)
AdoptOrderForApproveFinalyDto,,? \

adoptOrder,,] g
),,g h
{-- 	
if.. 
(.. 

adoptOrder.. 
==.. 
null.. "
).." #
{// 
return00 

BadRequest00 !
(00! "
)00" #
;00# $
}11 
try22 
{33 
await44 
_adoptOrderService44 (
.44( )#
ApproveFinalyAdoptOrder44) @
(44@ A

adoptOrder44A K
)44K L
;44L M
return55 
Ok55 
(55 
)55 
;55 
}66 
catch77 
(77 
	Exception77 
ex77 
)77  
{88 
return99 

BadRequest99 !
(99! "
ex99" $
.99$ %
Message99% ,
)99, -
;99- .
}:: 
};; 	
[<< 	
	Authorize<<	 
(<< 
Roles<< 
=<< 
$str<< -
)<<- .
]<<. /
[== 	
HttpPost==	 
]== 
[>> 	
Route>>	 
(>> 
$str>> "
)>>" #
]>># $
public?? 
async?? 
Task?? 
<?? 
ActionResult?? &
>??& '
DeclineAdoptOrder??( 9
(??9 :#
AdoptOrderForDeclineDto??: Q

adoptOrder??R \
)??\ ]
{@@ 	
ifAA 
(AA 

adoptOrderAA 
==AA 
nullAA "
)AA" #
{BB 
returnCC 

BadRequestCC !
(CC! "
)CC" #
;CC# $
}DD 
tryEE 
{FF 
awaitGG 
_adoptOrderServiceGG (
.GG( )
DeclineAdoptOrderGG) :
(GG: ;

adoptOrderGG; E
)GGE F
;GGF G
returnHH 
OkHH 
(HH 
)HH 
;HH 
}II 
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ  
{KK 
returnLL 

BadRequestLL !
(LL! "
exLL" $
.LL$ %
MessageLL% ,
)LL, -
;LL- .
}MM 
}NN 	
[OO 	
	AuthorizeOO	 
(OO 
RolesOO 
=OO 
$strOO -
)OO- .
]OO. /
[PP 	
HttpGetPP	 
]PP 
[QQ 	
RouteQQ	 
(QQ 
$strQQ "
)QQ" #
]QQ# $
publicRR 
asyncRR 
TaskRR 
<RR 
ActionResultRR &
<RR& '
IEnumerableRR' 2
<RR2 3
AdoptOrderDtoRR3 @
>RR@ A
>RRA B
>RRB C
GetAllAdoptkOrdersRRD V
(RRV W
)RRW X
{SS 	
tryTT 
{UU 
varVV 
adoptOrdersVV 
=VV  !
awaitVV" '
_adoptOrderServiceVV( :
.VV: ;
GetAllAdoptOrdersVV; L
(VVL M
)VVM N
;VVN O
ifWW 
(WW 
adoptOrdersWW 
.WW  
CountWW  %
(WW% &
)WW& '
!=WW( *
$numWW+ ,
)WW, -
returnXX 
OkXX 
(XX 
adoptOrdersXX )
)XX) *
;XX* +
returnYY 
	NoContentYY  
(YY  !
)YY! "
;YY" #
}ZZ 
catch[[ 
([[ 
	Exception[[ 
ex[[ 
)[[  
{\\ 
return]] 

BadRequest]] !
(]]! "
ex]]" $
.]]$ %
Message]]% ,
)]], -
;]]- .
}^^ 
}__ 	
[`` 	
	Authorize``	 
(`` 
Roles`` 
=`` 
$str`` -
)``- .
]``. /
[aa 	
HttpGetaa	 
]aa 
[bb 	
Routebb	 
(bb 
$strbb *
)bb* +
]bb+ ,
publiccc 
ActionResultcc 
<cc 
IEnumerablecc '
<cc' (
AdoptOrderDtocc( 5
>cc5 6
>cc6 7%
GetAllApprovedAdoptOrderscc8 Q
(ccQ R
)ccR S
{dd 	
tryee 
{ff 
vargg 
adoptOrdersgg 
=gg  !
_adoptOrderServicegg# 5
.gg5 6%
GetAllApprovedAdoptOrdersgg6 O
(ggO P
)ggP Q
;ggQ R
ifhh 
(hh 
adoptOrdershh 
.hh  
Counthh  %
(hh% &
)hh& '
!=hh( *
$numhh+ ,
)hh, -
returnii 
Okii 
(ii 
adoptOrdersii )
)ii) *
;ii* +
returnjj 
	NoContentjj  
(jj  !
)jj! "
;jj" #
}kk 
catchll 
(ll 
	Exceptionll 
exll 
)ll  
{mm 
returnnn 

BadRequestnn !
(nn! "
exnn" $
.nn$ %
Messagenn% ,
)nn, -
;nn- .
}oo 
}pp 	
[qq 	
	Authorizeqq	 
(qq 
Rolesqq 
=qq 
$strqq -
)qq- .
]qq. /
[rr 	
HttpGetrr	 
]rr 
[ss 	
Routess	 
(ss 
$strss )
)ss) *
]ss* +
publictt 
ActionResulttt 
<tt 
IEnumerablett '
<tt' (
AdoptOrderDtott( 5
>tt5 6
>tt6 7$
GetAllPendingAdoptOrderstt8 P
(ttP Q
)ttQ R
{uu 	
tryvv 
{ww 
varxx 
adoptOrdersxx 
=xx  !
_adoptOrderServicexx" 4
.xx4 5$
GetAllPendingAdoptOrdersxx5 M
(xxM N
)xxN O
;xxO P
ifyy 
(yy 
adoptOrdersyy 
.yy  
Countyy  %
(yy% &
)yy& '
!=yy( *
$numyy+ ,
)yy, -
returnzz 
Okzz 
(zz 
adoptOrderszz )
)zz) *
;zz* +
return{{ 
	NoContent{{  
({{  !
){{! "
;{{" #
}|| 
catch}} 
(}} 
	Exception}} 
ex}} 
)}}  
{~~ 
return 

BadRequest !
(! "
ex" $
.$ %
Message% ,
), -
;- .
}
ÄÄ 
}
ÅÅ 	
[
ÇÇ 	
	Authorize
ÇÇ	 
]
ÇÇ 
[
ÉÉ 	
HttpGet
ÉÉ	 
]
ÉÉ 
[
ÑÑ 	
Route
ÑÑ	 
(
ÑÑ 
$str
ÑÑ *
)
ÑÑ* +
]
ÑÑ+ ,
public
ÖÖ 
ActionResult
ÖÖ 
<
ÖÖ 
AdoptOrderDto
ÖÖ )
>
ÖÖ) *'
GetAllAdoptOrdersByUserId
ÖÖ+ D
(
ÖÖD E
string
ÖÖE K
id
ÖÖL N
)
ÖÖN O
{
ÜÜ 	
try
áá 
{
àà 
var
ââ 
adoptOrders
ââ 
=
ââ  ! 
_adoptOrderService
ââ" 4
.
ââ4 5'
GetAllAdoptOrdersByUserId
ââ5 N
(
ââN O
id
ââO Q
)
ââQ R
;
ââR S
return
ää 
Ok
ää 
(
ää 
adoptOrders
ää %
)
ää% &
;
ää& '
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
ex
åå 
)
åå  
{
çç 
return
éé 

BadRequest
éé !
(
éé! "
ex
éé" $
.
éé$ %
Message
éé% ,
)
éé, -
;
éé- .
}
èè 
}
êê 	
[
íí 	
	Authorize
íí	 
]
íí 
[
ìì 	
HttpGet
ìì	 
]
ìì 
[
îî 	
Route
îî	 
(
îî 
$str
îî 
)
îî 
]
îî 
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
ActionResult
ïï &
<
ïï& '
AdoptOrderDto
ïï' 4
>
ïï4 5
>
ïï5 6
GetById
ïï7 >
(
ïï> ?
long
ïï? C
id
ïïD F
)
ïïF G
{
ññ 	
try
óó 
{
òò 
var
ôô 
adoptOrders
ôô 
=
ôô  !
await
ôô" ' 
_adoptOrderService
ôô( :
.
ôô: ;
GetById
ôô; B
(
ôôB C
id
ôôC E
)
ôôE F
;
ôôF G
return
öö 
Ok
öö 
(
öö 
adoptOrders
öö %
)
öö% &
;
öö& '
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
ex
úú 
)
úú  
{
ùù 
return
ûû 

BadRequest
ûû !
(
ûû! "
ex
ûû" $
.
ûû$ %
Message
ûû% ,
)
ûû, -
;
ûû- .
}
üü 
}
†† 	
}
°° 
}¢¢ Êî
WC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AnimalController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
AnimalController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IAnimalService '
_animalService( 6
;6 7
public 
AnimalController 
(  
IAnimalService  .
animalService/ <
)< =
{ 	
_animalService 
= 
animalService *
;* +
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str +
)+ ,
], -
public 
ActionResult 
< 

Pagination &
<& '
IEnumerable' 2
<2 3
	AnimalDto3 <
>< =
>= >
>> ?
Get@ C
(C D
[D E
	FromQueryE N
]N O
AnimalFilterP \"
getAllAnimalPostFilter] s
=t u
nullv z
, 
[ 
	FromQuery 
] "
AnimalPaginationFilter 0

pagination1 ;
=< =
null> B
)B C
{   	
try!! 
{"" 
var## 
animals## 
=## 
_animalService## ,
.##, -
GetAllAnimals##- :
(##: ;"
getAllAnimalPostFilter##; Q
,##Q R

pagination##S ]
)##] ^
;##^ _
return$$ 
Ok$$ 
($$ 
animals$$ !
)$$! "
;$$" #
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{'' 
return)) 

BadRequest)) !
())! "
ex))" $
.))$ %
Message))% ,
))), -
;))- .
}** 
},, 	
[-- 	
HttpGet--	 
]-- 
[.. 	
Route..	 
(.. 
$str.. 
).. 
].. 
public// 
ActionResult// 
<// 

Pagination// &
<//& '
IEnumerable//' 2
<//2 3"
AnimalIncludeValuesDto//3 I
>//I J
>//J K
>//K L&
GetAllAnimalsIncludeValues//M g
(//g h
[//h i
	FromQuery//i r
]//r s
AnimalFilter	//t Ä$
getAllAnimalPostFilter
//Å ó
=
//ò ô
null
//ö û
,00
 
[00 
	FromQuery00 
]00 "
AnimalPaginationFilter00 .

pagination00/ 9
=00: ;
null00< @
)00@ A
{11 	
try22 
{33 
var44 
animals44 
=44 
_animalService44 ,
.44, -&
GetAllAnimalsIncludeValues44- G
(44G H"
getAllAnimalPostFilter44H ^
,44^ _

pagination44` j
)44j k
;44k l
return55 
Ok55 
(55 
animals55 !
)55! "
;55" #
}66 
catch77 
(77 
	Exception77 
ex77 
)77  
{88 
return:: 

BadRequest:: !
(::! "
ex::" $
.::$ %
Message::% ,
)::, -
;::- .
};; 
}== 	
[>> 	
HttpGet>>	 
]>> 
[?? 	
Route??	 
(?? 
$str?? %
)??% &
]??& '
public@@ 
async@@ 
Task@@ 
<@@ 
ActionResult@@ &
<@@& '
IEnumerable@@' 2
<@@2 3
	AnimalDto@@3 <
>@@< =
>@@= >
>@@> ? 
GetAllAdoptedAnimals@@@ T
(@@T U
)@@U V
{AA 	
tryBB 
{CC 
varDD 
animalsDD 
=DD 
awaitDD #
_animalServiceDD$ 2
.DD2 3 
GetAllAdoptedAnimalsDD3 G
(DDG H
)DDH I
;DDI J
returnEE 
OkEE 
(EE 
animalsEE !
)EE! "
;EE" #
}FF 
catchGG 
(GG 
	ExceptionGG 
exGG 
)GG  
{HH 
returnJJ 

BadRequestJJ !
(JJ! "
exJJ" $
.JJ$ %
MessageJJ% ,
)JJ, -
;JJ- .
}KK 
}LL 	
[NN 	
HttpGetNN	 
]NN 
[OO 	
RouteOO	 
(OO 
$strOO $
)OO$ %
]OO% &
publicPP 
asyncPP 
TaskPP 
<PP 
ActionResultPP &
<PP& '
IEnumerablePP' 2
<PP2 3
	AnimalDtoPP3 <
>PP< =
>PP= >
>PP> ?
GetAllHiddenAnimalsPP@ S
(PPS T
)PPT U
{QQ 	
tryRR 
{SS 
varTT 
animalsTT 
=TT 
awaitTT #
_animalServiceTT$ 2
.TT2 3
GetAllHiddenAnimalsTT3 F
(TTF G
)TTG H
;TTH I
returnUU 
OkUU 
(UU 
animalsUU !
)UU! "
;UU" #
}VV 
catchWW 
(WW 
	ExceptionWW 
exWW 
)WW  
{XX 
returnZZ 

BadRequestZZ !
(ZZ! "
exZZ" $
.ZZ$ %
MessageZZ% ,
)ZZ, -
;ZZ- .
}[[ 
}\\ 	
[]] 	
HttpGet]]	 
]]] 
[^^ 	
Route^^	 
(^^ 
$str^^ 
)^^ 
]^^  
[__ 	

TypeFilter__	 
(__ 
typeof__ 
(__ !
AnimalStatisticFilter__ 0
)__0 1
)__1 2
]__2 3
public`` 
ActionResult`` 
<`` 
	AnimalDto`` %
>``% &
	GetAnimal``' 0
(``0 1
long``1 5
id``6 8
)``8 9
{aa 	
trybb 
{cc 
vardd 
animaldd 
=dd 
_animalServicedd ,
.dd, -
GetByIddd- 4
(dd4 5
iddd5 7
)dd7 8
;dd8 9
returnee 
Okee 
(ee 
animalee  
)ee  !
;ee! "
}ff 
catchgg 
(gg 
	Exceptiongg 
exgg 
)gg  
{hh 
returnjj 
NotFoundjj 
(jj  
exjj  "
)jj" #
;jj# $
}kk 
}ll 	
[nn 	
HttpGetnn	 
]nn 
[oo 	
Routeoo	 
(oo 
$stroo 
)oo 
]oo  
[pp 	

TypeFilterpp	 
(pp 
typeofpp 
(pp !
AnimalStatisticFilterpp 0
)pp0 1
)pp1 2
]pp2 3
publicqq 
ActionResultqq 
<qq "
AnimalIncludeValuesDtoqq 2
>qq2 3"
GetAnimalIncludeValuesqq4 J
(qqJ K
longqqK O
idqqP R
)qqR S
{rr 	
tryss 
{tt 
varuu 
animaluu 
=uu 
_animalServiceuu ,
.uu, - 
GetByIdIncludeValuesuu- A
(uuA B
iduuB D
)uuD E
;uuE F
returnvv 
Okvv 
(vv 
animalvv  
)vv  !
;vv! "
}ww 
catchxx 
(xx 
	Exceptionxx 
exxx 
)xx  
{yy 
return{{ 
NotFound{{ 
({{  
ex{{  "
.{{" #
Message{{# *
){{* +
;{{+ ,
}|| 
}}} 	
[~~ 	
HttpGet~~	 
]~~ 
[ 	
Route	 
( 
$str 
) 
]  
[
ÄÄ 	

TypeFilter
ÄÄ	 
(
ÄÄ 
typeof
ÄÄ 
(
ÄÄ #
AnimalStatisticFilter
ÄÄ 0
)
ÄÄ0 1
)
ÄÄ1 2
]
ÄÄ2 3
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
ActionResult
ÅÅ &
<
ÅÅ& '
	AnimalDto
ÅÅ' 0
>
ÅÅ0 1
>
ÅÅ1 2
GetRecommended
ÅÅ3 A
(
ÅÅA B
long
ÅÅB F
id
ÅÅG I
)
ÅÅI J
{
ÇÇ 	
try
ÉÉ 
{
ÑÑ 
var
ÖÖ 
animal
ÖÖ 
=
ÖÖ 
_animalService
ÖÖ ,
.
ÖÖ, -"
GetByIdIncludeValues
ÖÖ- A
(
ÖÖA B
id
ÖÖB D
)
ÖÖD E
;
ÖÖE F
var
ÜÜ 
animals
ÜÜ 
=
ÜÜ 
await
ÜÜ #
_animalService
ÜÜ$ 2
.
ÜÜ2 3 
GetRecommendedPets
ÜÜ3 E
(
ÜÜE F
animal
ÜÜF L
)
ÜÜL M
;
ÜÜM N
AnimalRecommended
áá !$
mainAndRecommendedPets
áá" 8
=
áá9 :
new
áá; >
AnimalRecommended
áá? P
(
ááP Q
)
ááQ R
{
ááS T

mainAnimal
ááU _
=
áá` a
animal
ááb h
,
ááh i 
recommendedAnimals
ááj |
=
áá} ~
animalsáá Ü
}ááá à
;ááà â
return
àà 
Ok
àà 
(
àà $
mainAndRecommendedPets
àà 0
)
àà0 1
;
àà1 2
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
ex
ää 
)
ää  
{
ãã 
return
çç 
NotFound
çç 
(
çç  
ex
çç  "
.
çç" #
Message
çç# *
)
çç* +
;
çç+ ,
}
éé 
}
èè 	
[
êê 	
	Authorize
êê	 
(
êê 
Roles
êê 
=
êê 
$str
êê -
)
êê- .
]
êê. /
[
ëë 	
HttpPut
ëë	 
(
ëë 
$str
ëë 
)
ëë 
]
ëë 
public
íí 
async
íí 
Task
íí 
<
íí 
ActionResult
íí &
<
íí& '
	AnimalDto
íí' 0
>
íí0 1
>
íí1 2
Update
íí3 9
(
íí9 :
long
íí: >
id
íí? A
,
ííA B
[
ííC D
FromBody
ííD L
]
ííL M
	AnimalDto
ííM V
animalModel
ííW b
)
ííb c
{
ìì 	
if
îî 
(
îî 
id
îî 
!=
îî 
animalModel
îî !
.
îî! "
Id
îî" $
)
îî$ %
return
ïï 

BadRequest
ïï !
(
ïï! "
)
ïï" #
;
ïï# $
try
ññ 
{
óó 
var
òò 
animal
òò 
=
òò 
await
òò "
_animalService
òò# 1
.
òò1 2
UpdateAnimal
òò2 >
(
òò> ?
animalModel
òò? J
)
òòJ K
;
òòK L
return
ôô 
Ok
ôô 
(
ôô 
animal
ôô  
)
ôô  !
;
ôô! "
}
öö 
catch
õõ 
(
õõ 
	Exception
õõ 
ex
õõ 
)
õõ  
{
úú 
return
ùù 

BadRequest
ùù !
(
ùù! "
ex
ùù" $
.
ùù$ %
Message
ùù% ,
)
ùù, -
;
ùù- .
}
ûû 
}
üü 	
[
†† 	
HttpPut
††	 
]
†† 
[
°° 	
Route
°°	 
(
°° 
$str
°° 
)
°° 
]
°°  
public
¢¢ 
async
¢¢ 
Task
¢¢ 
<
¢¢ 
ActionResult
¢¢ &
>
¢¢& '"
UpdateApprovedAnimal
¢¢( <
(
¢¢< =
long
¢¢= A
id
¢¢B D
,
¢¢D E
[
¢¢F G
FromBody
¢¢G O
]
¢¢O P
AnimalApprovedDto
¢¢P a
animalModel
¢¢b m
)
¢¢m n
{
££ 	
if
§§ 
(
§§ 
id
§§ 
!=
§§ 
animalModel
§§ !
.
§§! "
Id
§§" $
)
§§$ %
return
•• 

BadRequest
•• !
(
••! "
)
••" #
;
••# $
try
¶¶ 
{
ßß 
await
®® 
_animalService
®® $
.
®®$ %"
UpdateApprovedAnimal
®®% 9
(
®®9 :
animalModel
®®: E
)
®®E F
;
®®F G
return
©© 
	NoContent
©©  
(
©©  !
)
©©! "
;
©©" #
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´ 
ex
´´ 
)
´´  
{
¨¨ 
return
≠≠ 

BadRequest
≠≠ !
(
≠≠! "
ex
≠≠" $
.
≠≠$ %
Message
≠≠% ,
)
≠≠, -
;
≠≠- .
}
ÆÆ 
}
ØØ 	
[
∞∞ 	
	Authorize
∞∞	 
(
∞∞ 
Roles
∞∞ 
=
∞∞ 
$str
∞∞ -
)
∞∞- .
]
∞∞. /
[
±± 	
HttpPost
±±	 
]
±± 
public
≤≤ 
async
≤≤ 
Task
≤≤ 
<
≤≤ 
ActionResult
≤≤ &
<
≤≤& '
	AnimalDto
≤≤' 0
>
≤≤0 1
>
≤≤1 2
Create
≤≤3 9
(
≤≤9 :
[
≤≤: ;
FromBody
≤≤; C
]
≤≤C D"
AnimalForCreationDto
≤≤D X
animalModel
≤≤Y d
)
≤≤d e
{
≥≥ 	
try
¥¥ 
{
µµ 
if
∂∂ 
(
∂∂ 
animalModel
∂∂ 
==
∂∂  "
null
∂∂# '
)
∂∂' (
return
∑∑ 

BadRequest
∑∑ %
(
∑∑% &
)
∑∑& '
;
∑∑' (
new
∏∏ "
AnimalModelValidator
∏∏ (
(
∏∏( )
animalModel
∏∏) 4
)
∏∏4 5
.
∏∏5 6
ValidateModel
∏∏6 C
(
∏∏C D
)
∏∏D E
;
∏∏E F
var
ππ 
animal
ππ 
=
ππ 
await
ππ "
_animalService
ππ# 1
.
ππ1 2
CreateAnimal
ππ2 >
(
ππ> ?
animalModel
ππ? J
)
ππJ K
;
ππK L
return
∫∫ 
Ok
∫∫ 
(
∫∫ 
animal
∫∫  
)
∫∫  !
;
∫∫! "
}
ªª 
catch
ºº 
(
ºº !
ValidationException
ºº &
ex
ºº' )
)
ºº) *
{
ΩΩ 
return
ææ 

BadRequest
ææ !
(
ææ! "
ex
ææ" $
.
ææ$ %
ToString
ææ% -
(
ææ- .
)
ææ. /
)
ææ/ 0
;
ææ0 1
}
øø 
catch
¿¿ 
(
¿¿ 
	Exception
¿¿ 
ex
¿¿ 
)
¿¿  
{
¡¡ 
return
¬¬ 

BadRequest
¬¬ !
(
¬¬! "
ex
¬¬" $
.
¬¬$ %
Message
¬¬% ,
)
¬¬, -
;
¬¬- .
}
√√ 
}
ƒƒ 	
[
≈≈ 	
	Authorize
≈≈	 
(
≈≈ 
Roles
≈≈ 
=
≈≈ 
$str
≈≈ -
)
≈≈- .
]
≈≈. /
[
∆∆ 	

HttpDelete
∆∆	 
(
∆∆ 
$str
∆∆ 
)
∆∆ 
]
∆∆ 
public
«« 
async
«« 
Task
«« 
<
«« 
ActionResult
«« &
<
««& '
	AnimalDto
««' 0
>
««0 1
>
««1 2

DeleteBook
««3 =
(
««= >
int
««> A
id
««B D
)
««D E
{
»» 	
try
…… 
{
   
var
ÀÀ 
animal
ÀÀ 
=
ÀÀ 
await
ÀÀ "
_animalService
ÀÀ# 1
.
ÀÀ1 2
Delete
ÀÀ2 8
(
ÀÀ8 9
id
ÀÀ9 ;
)
ÀÀ; <
;
ÀÀ< =
return
ÃÃ 
Ok
ÃÃ 
(
ÃÃ 
animal
ÃÃ  
)
ÃÃ  !
;
ÃÃ! "
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ 
	Exception
ŒŒ 
ex
ŒŒ 
)
ŒŒ  
{
œœ 
return
–– 
NotFound
–– 
(
––  
ex
––  "
.
––" #
Message
––# *
)
––* +
;
––+ ,
}
—— 
}
““ 	
[
‘‘ 	
	Authorize
‘‘	 
(
‘‘ 
Roles
‘‘ 
=
‘‘ 
$str
‘‘ -
)
‘‘- .
]
‘‘. /
[
’’ 	
HttpGet
’’	 
]
’’ 
[
÷÷ 	
Route
÷÷	 
(
÷÷ 
$str
÷÷ 
)
÷÷ 
]
÷÷  
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ 
ActionResult
◊◊ &
<
◊◊& ' 
AnimalStatisticDto
◊◊' 9
>
◊◊9 :
>
◊◊: ;
GetStatistic
◊◊< H
(
◊◊H I
long
◊◊I M
id
◊◊N P
)
◊◊P Q
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
var
€€ 
animalStatistic
€€ #
=
€€$ %
await
€€& +
_animalService
€€, :
.
€€: ;
GetStatistc
€€; F
(
€€F G
id
€€G I
)
€€I J
;
€€J K
return
‹‹ 
Ok
‹‹ 
(
‹‹ 
animalStatistic
‹‹ )
)
‹‹) *
;
‹‹* +
}
›› 
catch
ﬁﬁ 
(
ﬁﬁ 
	Exception
ﬁﬁ 
ex
ﬁﬁ 
)
ﬁﬁ  
{
ﬂﬂ 
return
‡‡ 
NotFound
‡‡ 
(
‡‡  
ex
‡‡  "
.
‡‡" #
Message
‡‡# *
)
‡‡* +
;
‡‡+ ,
}
·· 
}
‚‚ 	
[
‰‰ 	
	Authorize
‰‰	 
(
‰‰ 
Roles
‰‰ 
=
‰‰ 
$str
‰‰ -
)
‰‰- .
]
‰‰. /
[
ÂÂ 	
HttpGet
ÂÂ	 
(
ÂÂ 
$str
ÂÂ 5
)
ÂÂ5 6
]
ÂÂ6 7
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
ActionResult
ÊÊ &
<
ÊÊ& '
IEnumerable
ÊÊ' 2
<
ÊÊ2 3"
AnimalBookingTimeDto
ÊÊ3 G
>
ÊÊG H
>
ÊÊH I
>
ÊÊI J,
GetAnimalsBookingTimeRemaining
ÊÊK i
(
ÊÊi j
)
ÊÊj k
{
ÁÁ 	
try
ËË 
{
ÈÈ 
var
ÍÍ 
bookedAnimals
ÍÍ !
=
ÍÍ" #
await
ÍÍ$ )
_animalService
ÍÍ* 8
.
ÍÍ8 9#
GetAnimalsBookingTime
ÍÍ9 N
(
ÍÍN O
)
ÍÍO P
;
ÍÍP Q
return
ÎÎ 
Ok
ÎÎ 
(
ÎÎ 
bookedAnimals
ÎÎ '
)
ÎÎ' (
;
ÎÎ( )
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ 
ex
ÌÌ 
)
ÌÌ  
{
ÓÓ 
return
ÔÔ 

BadRequest
ÔÔ !
(
ÔÔ! "
ex
ÔÔ" $
.
ÔÔ$ %
Message
ÔÔ% ,
)
ÔÔ, -
;
ÔÔ- .
}
 
}
ÒÒ 	
}
ÚÚ 
}ÛÛ å
fC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AnimalLocationHistoryController.cs
	namespace 	
Api
 
. 
Controllers 
{		 
[

 
	Authorize

 
(

 
Roles

 
=

 
$str

 '
)

' (
]

( )
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class +
AnimalLocationHistoryController 0
:1 2
ControllerBase3 A
{ 
private 
readonly )
IAnimalLocationHistoryService 6
_service7 ?
;? @
public +
AnimalLocationHistoryController .
(. /)
IAnimalLocationHistoryService/ L
serviceM T
)T U
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
( 
$str !
)! "
]" #
public 
ActionResult 
< 
IEnumerable '
<' ($
AnimalLocationHistoryDto( @
>@ A
>A B%
GetAnimanlLocationHistoryC \
(\ ]
long] a
animalIdb j
)j k
{ 	
try 
{ 
var 
history 
= 
_service &
.& '$
GetAnimalLocationHistory' ?
(? @
animalId@ H
)H I
;I J
return 
Ok 
( 
history !
)! "
;" #
} 
catch 
( 
ArgumentException $
ex% '
)' (
{ 
return   

BadRequest   !
(  ! "
ex  " $
.  $ %
Message  % ,
)  , -
;  - .
}!! 
catch"" 
("" 
	Exception"" 
ex"" 
)""  
{## 
return$$ 

BadRequest$$ !
($$! "
ex$$" $
.$$$ %
Message$$% ,
)$$, -
;$$- .
}%% 
}&& 	
}'' 
}(( ˇ8
XC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\ArticleController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
ArticleController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IArticleService (
_articleService) 8
;8 9
public 
ArticleController  
(  !
IArticleService! 0
articleService1 ?
)? @
{ 	
_articleService 
= 
articleService ,
;, -
} 	
[ 	
HttpGet	 
] 
public 
ActionResult 
< 

Pagination &
<& '
IEnumerable' 2
<2 3

ArticleDto3 =
>= >
>> ?
>? @
GetAllArticlesA O
(O P
[P Q
	FromQueryQ Z
]Z [
ArticleFilter\ i
articleFiltersj x
=y z
null{ 
,	 Ä
[ 
	FromQuery 
] #
ArticlePaginationFilter /

pagination0 :
=; <
null= A
)A B
{ 	
try 
{ 
var 
articles 
= 
_articleService .
.. /
GetAllArticles/ =
(= >
articleFilters> L
,L M

paginationN X
)X Y
;Y Z
return 
Ok 
( 
articles "
)" #
;# $
} 
catch   
(   
	Exception   
ex   
)    
{!! 
return"" 

BadRequest"" !
(""! "
ex""" $
.""$ %
Message""% ,
)"", -
;""- .
}## 
}$$ 	
[%% 	
HttpGet%%	 
]%% 
[&& 	
Route&&	 
(&& 
$str&& 
)&& 
]&&  
['' 	

TypeFilter''	 
('' 
typeof'' 
('' "
ArticleStatisticFilter'' 1
)''1 2
)''2 3
]''3 4
public(( 
ActionResult(( 
<(( 

ArticleDto(( &
>((& '

GetArticle((( 2
(((2 3
long((3 7
id((8 :
)((: ;
{)) 	
try** 
{++ 
var,, 
articles,, 
=,, 
_articleService,,  /
.,,/ 0

GetArticle,,0 :
(,,: ;
id,,; =
),,= >
;,,> ?
return-- 
Ok-- 
(-- 
articles-- "
)--" #
;--# $
}.. 
catch// 
(// 
	Exception// 
ex// 
)// 
{00 
return11 
NotFound11 
(11  
ex11  "
)11" #
;11# $
}22 
}33 	
[44 	
	Authorize44	 
(44 
Roles44 
=44 
$str44 -
)44- .
]44. /
[55 	
HttpPost55	 
(55 
$str55 "
)55" #
]55# $
public66 
async66 
Task66 
<66 
ActionResult66 &
>66& '
Create66( .
(66. /!
ArticleForCreationDto66/ D
article66E L
)66L M
{77 	
try88 
{99 
if:: 
(:: 
article:: 
==:: 
null:: #
)::# $
return;; 

BadRequest;; %
(;;% &
);;& '
;;;' (
await<< 
_articleService<< %
.<<% &
PublishArticle<<& 4
(<<4 5
article<<5 <
)<<< =
;<<= >
return== 
	NoContent==  
(==  !
)==! "
;==" #
}>> 
catch?? 
(?? 
	Exception?? 
ex?? 
)??  
{@@ 
returnAA 

BadRequestAA !
(AA! "
exAA" $
.AA$ %
MessageAA% ,
)AA, -
;AA- .
}BB 
}CC 	
[DD 	
	AuthorizeDD	 
(DD 
RolesDD 
=DD 
$strDD -
)DD- .
]DD. /
[EE 	
HttpPutEE	 
(EE 
$strEE  
)EE  !
]EE! "
publicFF 
asyncFF 
TaskFF 
<FF 
ActionResultFF &
>FF& '
UpdateFF( .
(FF. /
ArticleForUpdateDtoFF/ B
articleFFC J
)FFJ K
{GG 	
tryHH 
{II 
awaitJJ 
_articleServiceJJ %
.JJ% &
UpdateArticleJJ& 3
(JJ3 4
articleJJ4 ;
)JJ; <
;JJ< =
}KK 
catchLL 
(LL 
	ExceptionLL 
exLL 
)LL  
{MM 
returnNN 

BadRequestNN !
(NN! "
exNN" $
.NN$ %
MessageNN% ,
)NN, -
;NN- .
}OO 
returnPP 
	NoContentPP 
(PP 
)PP 
;PP 
}QQ 	
[RR 	
	AuthorizeRR	 
(RR 
RolesRR 
=RR 
$strRR -
)RR- .
]RR. /
[SS 	

HttpDeleteSS	 
(SS 
$strSS 
)SS 
]SS 
publicTT 
asyncTT 
TaskTT 
<TT 
ActionResultTT &
<TT& '

ArticleDtoTT' 1
>TT1 2
>TT2 3
DeleteTT4 :
(TT: ;
intTT; >
idTT? A
)TTA B
{UU 	
tryVV 
{WW 
varXX 
articleXX 
=XX 
awaitXX #
_articleServiceXX$ 3
.XX3 4
DeleteArticleXX4 A
(XXA B
idXXB D
)XXD E
;XXE F
returnYY 
OkYY 
(YY 
articleYY !
)YY! "
;YY" #
}ZZ 
catch[[ 
([[ 
	Exception[[ 
ex[[ 
)[[  
{\\ 
return]] 
NotFound]] 
(]]  
ex]]  "
.]]" #
Message]]# *
)]]* +
;]]+ ,
}^^ 
}__ 	
[`` 	
HttpGet``	 
]`` 
[aa 	
Routeaa	 
(aa 
$straa 
)aa 
]aa  
publicbb 
asyncbb 
Taskbb 
<bb 
ArticleStatisticDtobb -
>bb- .
GetStatistcbb/ :
(bb: ;
longbb; ?
idbb@ B
)bbB C
{cc 	
vardd 
animalStatisticdd 
=dd  !
awaitdd" '
_articleServicedd( 7
.dd7 8
GetStatistcdd8 C
(ddC D
idddD F
)ddF G
;ddG H
returnee 
animalStatisticee "
;ee" #
}ff 	
}gg 
}hh À

[C:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\AttitudeToController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class  
AttitudeToController %
:& '
ControllerBase( 6
{ 
private 
readonly 
IAttitudeToService +
_attitudeToService, >
;> ?
public  
AttitudeToController #
(# $
IAttitudeToService$ 6
attitudeToService7 H
)H I
{ 	
_attitudeToService 
=  
attitudeToService! 2
;2 3
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
AttitudeToDto& 3
>3 4
>4 5
GetAttitudes6 B
(B C
)C D
{ 	
return 
await 
_attitudeToService +
.+ ,
GetAllAttitudes, ;
(; <
)< =
;= >
} 	
} 
} ó
UC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\BlobController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
BlobController

 
:

  !
ControllerBase

" 0
{ 
private 
readonly 
IBlobService %
_blobService& 2
;2 3
public 
BlobController 
( 
IBlobService *
blobService+ 6
)6 7
{ 	
_blobService 
= 
blobService &
;& '
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
	ListBlobs) 2
(2 3
)3 4
{ 	
return 
Ok 
( 
await 
_blobService (
.( )
ListBlobAsync) 6
(6 7
)7 8
)8 9
;9 :
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetBlob) 0
(0 1
string1 7
blobName8 @
)@ A
{ 	
var 
data 
= 
await 
_blobService )
.) *
GetBlobsAsync* 7
(7 8
blobName8 @
)@ A
;A B
return 
File 
( 
data 
. 
Stream #
,# $
data% )
.) *
ContentType* 5
)5 6
;6 7
} 	
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public   
async   
Task   
<   
IActionResult   '
>  ' (

UploadFile  ) 3
(  3 4
[  4 5
FromBody  5 =
]  = > 
UploadFileRequestDto  ? S
request  T [
)  [ \
{!! 	
try"" 
{## 
await$$ 
_blobService$$ "
.$$" #
UploadFileBlobAsync$$# 6
($$6 7
request$$7 >
.$$> ?
FilePath$$? G
,$$G H
request$$I P
.$$P Q
FileName$$Q Y
)$$Y Z
;$$Z [
return%% 
Ok%% 
(%% 
)%% 
;%% 
}&& 
catch'' 
('' 
System'' 
.'' 
	Exception'' #
ex''$ &
)''& '
{(( 
return)) 

BadRequest)) !
())! "
ex))" $
.))$ %
Message))% ,
))), -
;))- .
}** 
}++ 	
},, 
}-- ßZ
ZC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\BookOrderController.cs
	namespace

 	
Api


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
BookOrderController $
:% &
ControllerBase' 5
{ 
private 
readonly 
IBookOrderService *
_bookOrderService+ <
;< =
public 
BookOrderController "
(" #
IBookOrderService# 4
bookOrderService5 E
)E F
{ 	
_bookOrderService 
= 
bookOrderService  0
;0 1
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str -
)- .
]. /
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
ActionResult &
>& '
AppoveBookOrder( 7
(7 8"
BookOrderForApproveDto8 N
	bookOrderO X
)X Y
{ 	
if 
( 
	bookOrder 
== 
null  
)  !
{ 
return 

BadRequest !
(! "
)" #
;# $
} 
try 
{   
await!! 
_bookOrderService!! '
.!!' (
ApproveBookOrder!!( 8
(!!8 9
	bookOrder!!9 B
)!!B C
;!!C D
return"" 
Ok"" 
("" 
)"" 
;"" 
}## 
catch$$ 
($$ 
	Exception$$ 
ex$$ 
)$$ 
{%% 
return&& 

BadRequest&& !
(&&! "
ex&&" $
.&&$ %
Message&&% ,
)&&, -
;&&- .
}'' 
}(( 	
[)) 	
	Authorize))	 
()) 
Roles)) 
=)) 
$str)) -
)))- .
])). /
[** 	
HttpPost**	 
]** 
[++ 	
Route++	 
(++ 
$str++ !
)++! "
]++" #
public,, 
async,, 
Task,, 
<,, 
ActionResult,, &
>,,& '
DeclineAdoptOrder,,( 9
(,,9 :"
BookOrderForDeclineDto,,: P

adoptOrder,,Q [
),,[ \
{-- 	
if.. 
(.. 

adoptOrder.. 
==.. 
null.. "
).." #
{// 
return00 

BadRequest00 !
(00! "
)00" #
;00# $
}11 
try22 
{33 
await44 
_bookOrderService44 '
.44' (
DeclineBookOrder44( 8
(448 9

adoptOrder449 C
)44C D
;44D E
return55 
Ok55 
(55 
)55 
;55 
}66 
catch77 
(77 
	Exception77 
ex77 
)77  
{88 
return99 

BadRequest99 !
(99! "
ex99" $
.99$ %
Message99% ,
)99, -
;99- .
}:: 
};; 	
[<< 	
	Authorize<<	 
(<< 
Roles<< 
=<< 
$str<< -
)<<- .
]<<. /
[== 	
HttpGet==	 
]== 
[>> 	
Route>>	 
(>> 
$str>> !
)>>! "
]>>" #
public?? 
async?? 
Task?? 
<?? 
ActionResult?? &
<??& '
IEnumerable??' 2
<??2 3
BookOrderDto??3 ?
>??? @
>??@ A
>??A B
GetAllBookOrders??C S
(??S T
)??T U
{@@ 	
tryAA 
{BB 
varCC 

bookOrdersCC 
=CC  
awaitCC! &
_bookOrderServiceCC' 8
.CC8 9
GetAllBookOrdersCC9 I
(CCI J
)CCJ K
;CCK L
ifDD 
(DD 

bookOrdersDD 
.DD 
CountDD $
(DD$ %
)DD% &
!=DD' )
$numDD* +
)DD+ ,
returnEE 
OkEE 
(EE 

bookOrdersEE (
)EE( )
;EE) *
returnFF 
	NoContentFF  
(FF  !
)FF! "
;FF" #
}GG 
catchHH 
(HH 
	ExceptionHH 
exHH 
)HH  
{II 
returnJJ 

BadRequestJJ !
(JJ! "
exJJ" $
.JJ$ %
MessageJJ% ,
)JJ, -
;JJ- .
}KK 
}LL 	
[NN 	
	AuthorizeNN	 
(NN 
RolesNN 
=NN 
$strNN -
)NN- .
]NN. /
[OO 	
HttpGetOO	 
]OO 
[PP 	
RoutePP	 
(PP 
$strPP )
)PP) *
]PP* +
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
ActionResultQQ &
<QQ& '
IEnumerableQQ' 2
<QQ2 3
BookOrderDtoQQ3 ?
>QQ? @
>QQ@ A
>QQA B$
GetAllApprovedBookOrdersQQC [
(QQ[ \
)QQ\ ]
{RR 	
trySS 
{TT 
varUU 

bookOrdersUU 
=UU  
awaitUU! &
_bookOrderServiceUU' 8
.UU8 9$
GetAllApprovedBookOrdersUU9 Q
(UUQ R
)UUR S
;UUS T
ifVV 
(VV 

bookOrdersVV 
.VV 
CountVV $
(VV$ %
)VV% &
!=VV' )
$numVV* +
)VV+ ,
returnWW 
OkWW 
(WW 

bookOrdersWW (
)WW( )
;WW) *
returnXX 
	NoContentXX  
(XX  !
)XX! "
;XX" #
}YY 
catchZZ 
(ZZ 
	ExceptionZZ 
exZZ 
)ZZ  
{[[ 
return\\ 

BadRequest\\ !
(\\! "
ex\\" $
.\\$ %
Message\\% ,
)\\, -
;\\- .
}]] 
}^^ 	
[__ 	
	Authorize__	 
(__ 
Roles__ 
=__ 
$str__ -
)__- .
]__. /
[`` 	
HttpGet``	 
]`` 
[aa 	
Routeaa	 
(aa 
$straa (
)aa( )
]aa) *
publicbb 
ActionResultbb 
<bb 
IEnumerablebb '
<bb' (
BookOrderDtobb( 4
>bb4 5
>bb5 6#
GetAllPendingBookOrdersbb7 N
(bbN O
)bbO P
{cc 	
trydd 
{ee 
varff 

bookOrdersff 
=ff  
_bookOrderServiceff" 3
.ff3 4#
GetAllPendingBookOrdersff4 K
(ffK L
)ffL M
;ffM N
ifgg 
(gg 

bookOrdersgg 
.gg 
Countgg $
(gg$ %
)gg% &
!=gg' )
$numgg* +
)gg+ ,
returnhh 
Okhh 
(hh 

bookOrdershh (
)hh( )
;hh) *
returnii 
	NoContentii  
(ii  !
)ii! "
;ii" #
}jj 
catchkk 
(kk 
	Exceptionkk 
exkk 
)kk  
{ll 
returnmm 

BadRequestmm !
(mm! "
exmm" $
.mm$ %
Messagemm% ,
)mm, -
;mm- .
}nn 
}oo 	
[qq 	
	Authorizeqq	 
]qq 
[rr 	
HttpGetrr	 
]rr 
[ss 	
Routess	 
(ss 
$strss .
)ss. /
]ss/ 0
publictt 
ActionResulttt 
<tt 
IEnumerablett '
<tt' (
BookOrderDtott( 4
>tt4 5
>tt5 6)
GetAllBookOrdersOfCurrentUsertt7 T
(ttT U
)ttU V
{uu 	
tryvv 
{ww 
varxx 

bookOrdersxx 
=xx  
_bookOrderServicexx! 2
.xx2 3)
GetAllBookOrdersOfCurrentUserxx3 P
(xxP Q
)xxQ R
;xxR S
ifyy 
(yy 

bookOrdersyy 
.yy 
Countyy $
(yy$ %
)yy% &
!=yy' )
$numyy* +
)yy+ ,
returnzz 
Okzz 
(zz 

bookOrderszz (
)zz( )
;zz) *
return{{ 
	NoContent{{  
({{  !
){{! "
;{{" #
}|| 
catch}} 
(}} 
	Exception}} 
ex}} 
)}}  
{~~ 
return 

BadRequest !
(! "
ex" $
.$ %
Message% ,
), -
;- .
}
ÄÄ 
}
ÅÅ 	
[
ÇÇ 	
	Authorize
ÇÇ	 
]
ÇÇ 
[
ÉÉ 	
HttpGet
ÉÉ	 
]
ÉÉ 
[
ÑÑ 	
Route
ÑÑ	 
(
ÑÑ 
$str
ÑÑ )
)
ÑÑ) *
]
ÑÑ* +
public
ÖÖ 
ActionResult
ÖÖ 
<
ÖÖ 
BookOrderDto
ÖÖ (
>
ÖÖ( )&
GetAllBookOrdersByUserId
ÖÖ* B
(
ÖÖB C
string
ÖÖC I
id
ÖÖJ L
)
ÖÖL M
{
ÜÜ 	
try
áá 
{
àà 
var
ââ 

bookOrders
ââ 
=
ââ  
_bookOrderService
ââ" 3
.
ââ3 4&
GetAllBookOrdersByUserId
ââ4 L
(
ââL M
id
ââM O
)
ââO P
;
ââP Q
return
ää 
Ok
ää 
(
ää 

bookOrders
ää $
)
ää$ %
;
ää% &
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
ex
åå 
)
åå  
{
çç 
return
éé 

BadRequest
éé !
(
éé! "
ex
éé" $
.
éé$ %
Message
éé% ,
)
éé, -
;
éé- .
}
èè 
}
êê 	
[
íí 	
	Authorize
íí	 
]
íí 
[
ìì 	
HttpGet
ìì	 
]
ìì 
[
îî 	
Route
îî	 
(
îî 
$str
îî 
)
îî 
]
îî 
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
ActionResult
ïï &
<
ïï& '
BookOrderDto
ïï' 3
>
ïï3 4
>
ïï4 5
GetById
ïï6 =
(
ïï= >
long
ïï> B
id
ïïC E
)
ïïE F
{
ññ 	
try
óó 
{
òò 
var
ôô 

bookOrders
ôô 
=
ôô  
await
ôô! &
_bookOrderService
ôô' 8
.
ôô8 9
GetById
ôô9 @
(
ôô@ A
id
ôôA C
)
ôôC D
;
ôôD E
return
öö 
Ok
öö 
(
öö 

bookOrders
öö $
)
öö$ %
;
öö% &
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
ex
úú 
)
úú  
{
ùù 
return
ûû 

BadRequest
ûû !
(
ûû! "
ex
ûû" $
.
ûû$ %
Message
ûû% ,
)
ûû, -
;
ûû- .
}
üü 
}
†† 	
}
°° 
}¢¢ Ê 
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\BreedController.cs
	namespace 	
Api
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class 
BreedController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IBreedService &
_breedService' 4
;4 5
public 
BreedController 
( 
IBreedService ,
breedService- 9
)9 :
{ 	
_breedService 
= 
breedService (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
BreedDto& .
>. /
>/ 0
	GetBreeds1 :
(: ;
); <
{ 	
return 
await 
_breedService &
.& '
GetAllBreeds' 3
(3 4
)4 5
;5 6
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str -
)- .
]. /
[ 	
HttpPut	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
>& '
PutBreed( 0
(0 1
long1 5
id6 8
,8 9
[: ;
FromBody; C
]C D
BreedDtoD L
breedM R
)R S
{ 	
if   
(   
id   
!=   
breed   
.   
Id   
)   
{!! 
return"" 

BadRequest"" !
(""! "
)""" #
;""# $
}## 
await%% 
_breedService%% 
.%%  
UpdateBreed%%  +
(%%+ ,
breed%%, 1
)%%1 2
;%%2 3
return&& 
Ok&& 
(&& 
)&& 
;&& 
}'' 	
[** 	
	Authorize**	 
(** 
Roles** 
=** 
$str** -
)**- .
]**. /
[++ 	
HttpPost++	 
]++ 
public,, 
async,, 
Task,, 
<,, 
ActionResult,, &
>,,& '
	PostBreed,,( 1
(,,1 2
[,,2 3
FromBody,,3 ;
],,; <
BreedForCreationDto,,< O
breed,,P U
),,U V
{-- 	
await.. 
_breedService.. 
...  
CreateBreed..  +
(..+ ,
breed.., 1
)..1 2
;..2 3
return00 
Ok00 
(00 
)00 
;00 
}11 	
[44 	
	Authorize44	 
(44 
Roles44 
=44 
$str44 -
)44- .
]44. /
[55 	

HttpDelete55	 
(55 
$str55 
)55 
]55 
public66 
async66 
Task66 
<66 
ActionResult66 &
<66& '
BreedDto66' /
>66/ 0
>660 1
Deletebreed662 =
(66= >
long66> B
id66C E
)66E F
{77 	
var88 
breed88 
=88 
await88 
_breedService88 +
.88+ ,
GetBreedById88, 8
(888 9
id889 ;
)88; <
;88< =
if99 
(99 
breed99 
==99 
null99 
)99 
{:: 
return;; 
NotFound;; 
(;;  
);;  !
;;;! "
}<< 
await>> 
_breedService>> 
.>>  
DeleteBreed>>  +
(>>+ ,
id>>, .
)>>. /
;>>/ 0
return@@ 
breed@@ 
;@@ 
}AA 	
}BB 
}CC è

YC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\CategoryController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
CategoryController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
ICategoryService )
_service* 2
;2 3
public 
CategoryController !
(! "
ICategoryService" 2
service3 :
): ;
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
CategoryDto& 1
>1 2
>2 3
GetCategories4 A
(A B
)B C
{ 	
return 
await 
_service !
.! "
GetAllCategories" 2
(2 3
)3 4
;4 5
} 	
} 
} Ã$
WC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\DefectController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
DefectController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IDefectService '
_defectService( 6
;6 7
public 
DefectController 
(  
IDefectService  .
defectService/ <
)< =
{ 	
_defectService 
= 
defectService *
;* +
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
	DefectDto& /
>/ 0
>0 1

GetDefects2 <
(< =
)= >
{ 	
return 
await 
_defectService '
.' (
GetAllDefects( 5
(5 6
)6 7
;7 8
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
	DefectDto' 0
>0 1
>1 2
	GetDefect3 <
(< =
long= A
idB D
)D E
{ 	
var 
defect 
= 
await 
_defectService -
.- .
GetDefectById. ;
(; <
id< >
)> ?
;? @
if   
(   
defect   
==   
null   
)   
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
return%% 
defect%% 
;%% 
}&& 	
[)) 	
HttpPut))	 
()) 
$str)) 
))) 
])) 
public** 
async** 
Task** 
<** 
ActionResult** &
>**& '
	PutDefect**( 1
(**1 2
long**2 6
id**7 9
,**9 :
[**; <
FromBody**< D
]**D E
	DefectDto**E N
defect**O U
)**U V
{++ 	
if,, 
(,, 
id,, 
!=,, 
defect,, 
.,, 
Id,, 
),,  
{-- 
return.. 

BadRequest.. !
(..! "
).." #
;..# $
}// 
await11 
_defectService11  
.11  !
UpdateDefect11! -
(11- .
defect11. 4
)114 5
;115 6
return22 
Ok22 
(22 
)22 
;22 
}33 	
[66 	
HttpPost66	 
]66 
public77 
async77 
Task77 
<77 
ActionResult77 &
>77& '

PostDefect77( 2
(772 3
[773 4
FromBody774 <
]77< = 
DefectForCreationDto77= Q
defect77R X
)77X Y
{88 	
await99 
_defectService99  
.99  !
CreateDefect99! -
(99- .
defect99. 4
)994 5
;995 6
return;; 
Ok;; 
(;; 
);; 
;;; 
}<< 	
[?? 	

HttpDelete??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
async@@ 
Task@@ 
<@@ 
ActionResult@@ &
<@@& '
	DefectDto@@' 0
>@@0 1
>@@1 2
DeleteDefect@@3 ?
(@@? @
long@@@ D
id@@E G
)@@G H
{AA 	
varBB 
defectBB 
=BB 
awaitBB 
_defectServiceBB -
.BB- .
GetDefectByIdBB. ;
(BB; <
idBB< >
)BB> ?
;BB? @
ifCC 
(CC 
defectCC 
==CC 
nullCC 
)CC 
{DD 
returnEE 
NotFoundEE 
(EE  
)EE  !
;EE! "
}FF 
awaitHH 
_defectServiceHH  
.HH  !
DeleteDefectHH! -
(HH- .
idHH. 0
)HH0 1
;HH1 2
returnJJ 
defectJJ 
;JJ 
}KK 	
}LL 
}MM ´
\C:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\DescriptionController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class !
DescriptionController &
:' (
ControllerBase) 7
{ 
private 
readonly 
IDescriptionService ,
_descriptionService- @
;@ A
public !
DescriptionController $
($ %
IDescriptionService% 8
descriptionService9 K
)K L
{ 	
_descriptionService 
=  !
descriptionService" 4
;4 5
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
DescriptionDto' 5
>5 6
>6 7
GetDescription8 F
(F G
longG K
idL N
)N O
{ 	
var 
defect 
= 
await 
_descriptionService 2
.2 3
GetDescriptionById3 E
(E F
idF H
)H I
;I J
if 
( 
defect 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
} 
return 
defect 
; 
} 	
[ 	
HttpPut	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
>& '
PutDescription( 6
(6 7
long7 ;
id< >
,> ?
[@ A
FromBodyA I
]I J
DescriptionDtoJ X
descriptionY d
)d e
{   	
if!! 
(!! 
id!! 
!=!! 
description!! !
.!!! "
Id!!" $
)!!$ %
{"" 
return## 

BadRequest## !
(##! "
)##" #
;### $
}$$ 
await&& 
_descriptionService&& %
.&&% &
UpdateDescription&&& 7
(&&7 8
description&&8 C
)&&C D
;&&D E
return'' 
Ok'' 
('' 
)'' 
;'' 
}(( 	
[)) 	

HttpDelete))	 
()) 
$str)) 
))) 
])) 
public** 
async** 
Task** 
<** 
ActionResult** &
<**& '
DescriptionDto**' 5
>**5 6
>**6 7
DeleteDefect**8 D
(**D E
long**E I
id**J L
)**L M
{++ 	
var,, 
defect,, 
=,, 
await,, 
_descriptionService,, 2
.,,2 3
GetDescriptionById,,3 E
(,,E F
id,,F H
),,H I
;,,I J
if-- 
(-- 
defect-- 
==-- 
null-- 
)-- 
{.. 
return// 
NotFound// 
(//  
)//  !
;//! "
}00 
await22 
_descriptionService22 %
.22% &
Delete22& ,
(22, -
id22- /
)22/ 0
;220 1
return44 
defect44 
;44 
}55 	
}66 
}77 Ê	
UC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\FoodController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
FoodController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IFoodService %
_service& .
;. /
public 
FoodController 
( 
IFoodService *
service+ 2
)2 3
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
FoodDto& -
>- .
>. /
GetAll0 6
(6 7
)7 8
{ 	
return 
await 
_service !
.! "
GetAll" (
(( )
)) *
;* +
} 	
} 
} Ë	
UC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\HelpController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
HelpController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IHelpService %
_service& .
;. /
public 
HelpController 
( 
IHelpService *
service+ 2
)2 3
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
HelpDto& -
>- .
>. /
GetHelps0 8
(8 9
)9 :
{ 	
return 
await 
_service !
.! "
GetAll" (
(( )
)) *
;* +
} 	
} 
} ã
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\ImageController.cs
	namespace		 	
Api		
 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
ImageController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IImageService &
_imageService' 4
;4 5
public 
ImageController 
( 
IImageService ,
imageService- 9
)9 :
{ 	
_imageService 
= 
imageService (
;( )
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str -
)- .
]. /
[ 	
Route	 
( 
$str :
): ;
]; <
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
ActionResult &
>& '*
CreateImagesWithExistingAnimal( F
(F G
IListG L
<L M
	IFormFileM V
>V W
imagesX ^
,^ _
long` d
animalIde m
)m n
{ 	
try 
{ 
await 
_imageService #
.# $*
CreateImagesWithExistingAnimal$ B
(B C
imagesC I
,I J
animalIdK S
)S T
;T U
} 
catch 
( 
	Exception 
ex 
)  
{ 
return 

BadRequest !
(! "
ex" $
.$ %
Message% ,
), -
;- .
}   
return!! 
Ok!! 
(!! 
)!! 
;!! 
}"" 	
[## 	
	Authorize##	 
(## 
Roles## 
=## 
$str## -
)##- .
]##. /
[$$ 	

HttpDelete$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
>%%& '
DeleteImage%%( 3
(%%3 4
int%%4 7
id%%8 :
)%%: ;
{&& 	
try'' 
{(( 
await)) 
_imageService)) #
.))# $
Delete))$ *
())* +
id))+ -
)))- .
;)). /
}** 
catch++ 
(++ 
	Exception++ 
ex++ 
)++  
{,, 
return-- 

BadRequest-- !
(--! "
ex--" $
.--$ %
Message--% ,
)--, -
;--- .
}.. 
return// 
Ok// 
(// 
)// 
;// 
}00 	
}11 
}22 ¯	
XC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\KeepingController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
KeepingController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IKeepingService (
_service) 1
;1 2
public 
KeepingController  
(  !
IKeepingService! 0
service1 8
)8 9
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &

KeepingDto& 0
>0 1
>1 2
GetAll3 9
(9 :
): ;
{ 	
return 
await 
_service !
.! "
GetAll" (
(( )
)) *
;* +
} 	
} 
} Ï	
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\NeedsController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
NeedsController  
:! "
ControllerBase# 1
{ 
private 
readonly 
INeedsService &
_service' /
;/ 0
public 
NeedsController 
( 
INeedsService ,
service- 4
)4 5
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
NeedsDto& .
>. /
>/ 0
GetAll1 7
(7 8
)8 9
{ 	
return 
await 
_service !
.! "
GetAll" (
(( )
)) *
;* +
} 	
} 
} Ä
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\OrderController.cs
	namespace 	
Api
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class 
OrderController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IOrderService &
_service' /
;/ 0
public 
OrderController 
( 
IOrderService ,
service- 4
)4 5
{ 	
_service 
= 
service 
; 
} 	
[ 	
	Authorize	 
] 
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str !
)! "
]" #
public 
async 
Task 
< 
ActionResult &
>& '
CreateAdoptOrder( 8
(8 9
OrderForCreationDto9 L
orderM R
)R S
{ 	
try 
{ 
if 
( 
order 
== 
null !
)! "
return 

BadRequest %
(% &
)& '
;' (
await 
_service 
. 
CreateAdoptOrder /
(/ 0
order0 5
)5 6
;6 7
return 
	NoContent  
(  !
)! "
;" #
} 
catch 
( 
	Exception 
ex 
)  
{   
return!! 

BadRequest!! !
(!!! "
ex!!" $
.!!$ %
Message!!% ,
)!!, -
;!!- .
}"" 
}## 	
[$$ 	
	Authorize$$	 
]$$ 
[%% 	
HttpPost%%	 
]%% 
[&& 	
Route&&	 
(&& 
$str&&  
)&&  !
]&&! "
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
>''& '
CreateBookOrder''( 7
(''7 8
OrderForCreationDto''8 K
order''L Q
)''Q R
{(( 	
try)) 
{** 
if++ 
(++ 
order++ 
==++ 
null++ !
)++! "
return,, 

BadRequest,, %
(,,% &
),,& '
;,,' (
await-- 
_service-- 
.-- 
CreateBookOrder-- .
(--. /
order--/ 4
)--4 5
;--5 6
return.. 
	NoContent..  
(..  !
)..! "
;.." #
}// 
catch00 
(00 
	Exception00 
ex00 
)00  
{11 
return22 

BadRequest22 !
(22! "
ex22" $
.22$ %
Message22% ,
)22, -
;22- .
}33 
}44 	
}55 
}66 ¸
\C:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\OrderStatusController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
StatusController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly 
IStatusService '
_service( 0
;0 1
public 
StatusController 
(  
IStatusService  .
service/ 6
)6 7
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str $
)$ %
]% &
public 
Array 
GetOrderStatuses &
(& '
)' (
{ 	
return 
_service 
. 
GetAllOrderStatuses 0
(0 1
)1 2
;2 3
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str %
)% &
]& '
public 
Array 
GetAnimalStatuses &
(& '
)' (
{ 	
return 
_service 
.  
GetAllAnimalStatuses 1
(1 2
)2 3
;3 4
} 	
} 
}   ä

[C:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\ProcessingController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class  
ProcessingController %
:& '
ControllerBase( 6
{ 
private 
readonly 
IProcessingService +
_service, 4
;4 5
public  
ProcessingController #
(# $
IProcessingService$ 6
service7 >
)> ?
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
ProcessingDto& 3
>3 4
>4 5
GetAll6 <
(< =
)= >
{ 	
return 
await 
_service !
.! "
GetAll" (
(( )
)) *
;* +
} 	
} 
} ¯
UC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\RoleController.cs
	namespace		 	
Api		
 
.		 
Controllers		 
{

 
[ 
	Authorize 
( 
Roles 
= 
$str !
)! "
]" #
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
RoleController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IRoleService %
_roleService& 2
;2 3
public 
RoleController 
( 
IRoleService *
roleService+ 6
)6 7
{ 	
_roleService 
= 
roleService &
;& '
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PromoteToRole) 6
(6 7
UserRoleDto7 B
userRoleC K
)K L
{ 	
try 
{ 
await 
_roleService "
." #
PromoteToRole# 0
(0 1
userRole1 9
)9 :
;: ;
return 
	NoContent  
(  !
)! "
;" #
} 
catch 
( 
RoleException 
ex  "
)" #
{$ %
return 

BadRequest !
(! "
ex" $
.$ %
ToString% -
(- .
). /
)/ 0
;0 1
}   
catch!! 
(!! #
ObjectNotFoundException!! )
ex!!* ,
)!!, -
{"" 
return## 

BadRequest## !
(##! "
ex##" $
.##$ %
ToString##% -
(##- .
)##. /
)##/ 0
;##0 1
}$$ 
catch%% 
(%% 
	Exception%% 
ex%% 
)%%  
{&& 
return'' 

BadRequest'' !
(''! "
ex''" $
.''$ %
Message''% ,
)'', -
;''- .
}(( 
})) 	
[++ 	
HttpPost++	 
(++ 
$str++ 
)++ 
]++ 
public,, 
async,, 
Task,, 
<,, 
IActionResult,, '
>,,' (
DemoteFromRole,,) 7
(,,7 8
UserRoleDto,,8 C
userRole,,D L
),,L M
{-- 	
try.. 
{// 
await00 
_roleService00 "
.00" #
DemoteFromRole00# 1
(001 2
userRole002 :
)00: ;
;00; <
return11 
	NoContent11  
(11  !
)11! "
;11" #
}22 
catch33 
(33 
RoleException33  
ex33! #
)33# $
{44 
return55 

BadRequest55 !
(55! "
ex55" $
.55$ %
ToString55% -
(55- .
)55. /
)55/ 0
;550 1
}66 
catch77 
(77 #
ObjectNotFoundException77 *
ex77+ -
)77- .
{88 
return99 

BadRequest99 !
(99! "
ex99" $
.99$ %
ToString99% -
(99- .
)99. /
)99/ 0
;990 1
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);;  
{<< 
return== 

BadRequest== !
(==! "
ex==" $
.==$ %
Message==% ,
)==, -
;==- .
}>> 
}?? 	
}@@ 
}AA ì.
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\TokenController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
TokenController  
:! "
ControllerBase# 1
{ 
private 
readonly 
ITokenService &
_tokenService' 4
;4 5
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
public 
TokenController 
( 
ITokenService ,
tokenService- 9
,9 :
IConfiguration; I
configurationJ W
)W X
{ 	
_tokenService 
= 
tokenService (
;( )
_configuration 
= 
configuration *
;* +
} 	
[ 	
HttpPut	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Refresh) 0
(0 1
)1 2
{ 	
try 
{   
var!! 
	userToken!! 
=!! 
CookieHelper!!  ,
.!!, -
GetTokenValue!!- :
(!!: ;
_configuration!!; I
,!!I J
HttpContext!!K V
.!!V W
Request!!W ^
)!!^ _
;!!_ `
var"" 
tokens"" 
="" 
await"" "
_tokenService""# 0
.""0 1
RefreshToken""1 =
(""= >
	userToken""> G
)""G H
;""H I
CookieHelper## 
.## 
RefreshCookie## *
(##* +
_configuration##+ 9
,##9 :
HttpContext##; F
.##F G
Request##G N
,##N O
HttpContext##P [
.##[ \
Response##\ d
,##d e
tokens##f l
)##l m
;##m n
return$$ 
	NoContent$$  
($$  !
)$$! "
;$$" #
}%% 
catch&& 
(&& !
ObjectUpdateException&& (
ex&&) +
)&&+ ,
{'' 
return(( 
Forbid(( 
((( 
ex((  
.((  !
ToString((! )
((() *
)((* +
)((+ ,
;((, -
})) 
catch** 
(** #
ObjectNotFoundException** *
ex**+ -
)**- .
{++ 
return,, 
Forbid,, 
(,, 
ex,,  
.,,  !
ToString,,! )
(,,) *
),,* +
),,+ ,
;,,, -
}-- 
catch.. 
(.. !
ArgumentNullException.. (
ex..) +
)..+ ,
{// 
return00 
Forbid00 
(00 
ex00  
.00  !
Message00! (
)00( )
;00) *
}11 
catch22 
(22 
ArgumentException22 $
ex22% '
)22' (
{33 
return44 
Forbid44 
(44 
ex44  
.44  !
Message44! (
)44( )
;44) *
}55 
catch66 
(66 "
SecurityTokenException66 )
ex66* ,
)66, -
{77 
return88 
Forbid88 
(88 
ex88  
.88  !
Message88! (
)88( )
;88) *
}99 
catch:: 
(:: 
	Exception:: 
ex:: 
)::  
{;; 
return<< 
Forbid<< 
(<< 
ex<<  
.<<  !
Message<<! (
)<<( )
;<<) *
}== 
}>> 	
[@@ 	
HttpPost@@	 
(@@ 
$str@@ 
)@@ 
,@@ 
	Authorize@@ &
]@@& '
publicAA 
asyncAA 
TaskAA 
<AA 
IActionResultAA '
>AA' (
RevokeAA) /
(AA/ 0
)AA0 1
{BB 	
tryCC 
{DD 
varEE 
	userEmailEE 
=EE 
UserEE  $
.EE$ %
IdentityEE% -
.EE- .
NameEE. 2
;EE2 3
awaitFF 
_tokenServiceFF #
.FF# $
RevokeFF$ *
(FF* +
	userEmailFF+ 4
)FF4 5
;FF5 6
returnGG 
	NoContentGG  
(GG  !
)GG! "
;GG" #
}HH 
catchII 
(II !
ObjectUpdateExceptionII (
exII) +
)II+ ,
{JJ 
returnKK 

BadRequestKK !
(KK! "
exKK" $
.KK$ %
ToStringKK% -
(KK- .
)KK. /
)KK/ 0
;KK0 1
}LL 
catchMM 
(MM #
ObjectNotFoundExceptionMM *
exMM+ -
)MM- .
{NN 
returnOO 

BadRequestOO !
(OO! "
exOO" $
.OO$ %
ToStringOO% -
(OO- .
)OO. /
)OO/ 0
;OO0 1
}PP 
catchQQ 
(QQ 
ArgumentExceptionQQ $
exQQ% '
)QQ' (
{RR 
returnSS 

BadRequestSS !
(SS! "
exSS" $
.SS$ %
MessageSS% ,
)SS, -
;SS- .
}TT 
catchUU 
(UU 
	ExceptionUU 
exUU 
)UU  
{VV 
returnWW 

BadRequestWW !
(WW! "
exWW" $
.WW$ %
MessageWW% ,
)WW, -
;WW- .
}XX 
}YY 	
}ZZ 
}[[ É;
YC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\UserHelpController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[ 
	Authorize 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
UserHelpController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
IUserHelpService )
_service* 2
;2 3
public 
UserHelpController !
(! "
IUserHelpService" 2
service3 :
): ;
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Add) ,
(, -
UserHelpSetInDto- =
help> B
)B C
{ 	
try 
{ 
var 
	userEmail 
= 
User  $
.$ %
Identity% -
.- .
Name. 2
;2 3
await 
_service 
. 
Add "
(" #
help# '
.' (
userHelp( 0
,0 1
	userEmail2 ;
); <
;< =
return   
Ok   
(   
)   
;   
}!! 
catch"" 
("" 
ArgumentException"" #
ex""$ &
)""& '
{## 
return$$ 

BadRequest$$ !
($$! "
ex$$" $
.$$$ %
Message$$% ,
)$$, -
;$$- .
}%% 
catch&& 
(&& #
ObjectNotFoundException&& )
ex&&* ,
)&&, -
{'' 
return(( 

BadRequest(( !
(((! "
ex((" $
.(($ %
ToString((% -
(((- .
)((. /
)((/ 0
;((0 1
})) 
catch** 
(** !
ObjectCreateException** '
ex**( *
)*** +
{++ 
return,, 

BadRequest,, !
(,,! "
ex,," $
.,,$ %
ToString,,% -
(,,- .
),,. /
),,/ 0
;,,0 1
}-- 
catch.. 
(.. 
	Exception.. 
).. 
{// 
return00 

BadRequest00 !
(00! "
ExceptionStrings00" 2
.002 3#
CreateUserHelpException003 J
)00J K
;00K L
}11 
}22 	
[44 	
HttpGet44	 
(44 
$str44 
)44 
]44 
public55 
async55 
Task55 
<55 
ActionResult55 &
<55& '
UserHelpDto55' 2
>552 3
>553 4
GetHelpByUser555 B
(55B C
)55C D
{66 	
try77 
{88 
var99 
	userEmail99 
=99 
User99  $
.99$ %
Identity99% -
.99- .
Name99. 2
;992 3
var:: 
userHelp:: 
=:: 
await:: $
_service::% -
.::- .
GetHelpByUser::. ;
(::; <
	userEmail::< E
)::E F
;::F G
return;; 
Ok;; 
(;; 
userHelp;; "
);;" #
;;;# $
}<< 
catch== 
(== 
ArgumentException== #
ex==$ &
)==& '
{>> 
return?? 

BadRequest?? !
(??! "
ex??" $
.??$ %
Message??% ,
)??, -
;??- .
}@@ 
catchAA 
(AA #
ObjectNotFoundExceptionAA *
exAA+ -
)AA- .
{BB 
returnCC 

BadRequestCC !
(CC! "
exCC" $
)CC$ %
;CC% &
}DD 
catchEE 
(EE 
	ExceptionEE 
exEE 
)EE  
{FF 
returnGG 

BadRequestGG !
(GG! "
exGG" $
.GG$ %
MessageGG% ,
)GG, -
;GG- .
}HH 
}II 	
[KK 	
	AuthorizeKK	 
(KK 
RolesKK 
=KK 
$strKK .
)KK. /
]KK/ 0
[LL 	
HttpGetLL	 
(LL 
$strLL !
)LL! "
]LL" #
publicMM 
ActionResultMM 
<MM 
IEnumerableMM '
<MM' (
UserHelpOutDtoMM( 6
>MM6 7
>MM7 8
GetUsersByHelpMM9 G
(MMG H
intMMH K
helpIdMML R
)MMR S
{NN 	
tryOO 
{PP 
varQQ 
	usersHelpQQ 
=QQ 
_serviceQQ  (
.QQ( )
GetUsersByHelpQQ) 7
(QQ7 8
helpIdQQ8 >
)QQ> ?
;QQ? @
returnRR 
OkRR 
(RR 
	usersHelpRR #
)RR# $
;RR$ %
}SS 
catchTT 
(TT 
ArgumentExceptionTT #
exTT$ &
)TT& '
{UU 
returnVV 

BadRequestVV !
(VV! "
exVV" $
.VV$ %
MessageVV% ,
)VV, -
;VV- .
}WW 
catchXX 
(XX 
	ExceptionXX 
exXX 
)XX  
{YY 
returnZZ 

BadRequestZZ !
(ZZ! "
exZZ" $
.ZZ$ %
MessageZZ% ,
)ZZ, -
;ZZ- .
}[[ 
}\\ 	
[^^ 	
HttpPut^^	 
(^^ 
$str^^ 
)^^ 
]^^ 
public__ 
async__ 
Task__ 
<__ 
IActionResult__ '
>__' (
Update__) /
(__/ 0
UserHelpSetInDto__0 @
help__A E
)__E F
{`` 	
tryaa 
{bb 
varcc 
	userEmailcc 
=cc 
Usercc  $
.cc$ %
Identitycc% -
.cc- .
Namecc. 2
;cc2 3
awaitdd 
_servicedd 
.dd 
Updatedd %
(dd% &
helpdd& *
.dd* +
userHelpdd+ 3
,dd3 4
	userEmaildd5 >
)dd> ?
;dd? @
returnee 
Okee 
(ee 
)ee 
;ee 
}ff 
catchgg 
(gg 
ArgumentExceptiongg $
exgg% '
)gg' (
{hh 
returnii 

BadRequestii !
(ii! "
exii" $
.ii$ %
Messageii% ,
)ii, -
;ii- .
}jj 
catchkk 
(kk #
ObjectNotFoundExceptionkk *
exkk+ -
)kk- .
{ll 
returnmm 

BadRequestmm !
(mm! "
exmm" $
.mm$ %
ToStringmm% -
(mm- .
)mm. /
)mm/ 0
;mm0 1
}nn 
catchoo 
(oo 
	Exceptionoo 
exoo 
)oo  
{pp 
returnqq 

BadRequestqq !
(qq! "
exqq" $
.qq$ %
Messageqq% ,
)qq, -
;qq- .
}rr 
}ss 	
}tt 
}uu Í$
\C:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\VaccinationController.cs
	namespace 	
Api
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class !
VaccinationController &
:' (
ControllerBase) 7
{ 
private 
readonly 
IVaccinationService ,
_service- 5
;5 6
public !
VaccinationController $
($ %
IVaccinationService% 8
service9 @
)@ A
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
VaccinationDto& 4
>4 5
>5 6
GetAll7 =
(= >
)> ?
{ 	
return 
await 
_service !
.! "
GetAll" (
(( )
)) *
;* +
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
VaccinationDto' 5
>5 6
>6 7
GetById8 ?
(? @
long@ D
idE G
)G H
{ 	
var 
vaccination 
= 
await #
_service$ ,
., -
GetById- 4
(4 5
id5 7
)7 8
;8 9
if   
(   
vaccination   
==   
null   #
)  # $
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
return%% 
vaccination%% 
;%% 
}&& 	
[)) 	
HttpPut))	 
()) 
$str)) 
))) 
])) 
public** 
async** 
Task** 
<** 
ActionResult** &
>**& '
Put**( +
(**+ ,
long**, 0
id**1 3
,**3 4
[**5 6
FromBody**6 >
]**> ?
VaccinationDto**? M
vaccination**N Y
)**Y Z
{++ 	
if,, 
(,, 
id,, 
!=,, 
vaccination,, !
.,,! "
Id,," $
),,$ %
{-- 
return.. 

BadRequest.. !
(..! "
).." #
;..# $
}// 
await11 
_service11 
.11 
Update11 !
(11! "
vaccination11" -
)11- .
;11. /
return22 
Ok22 
(22 
)22 
;22 
}33 	
[66 	
HttpPost66	 
]66 
public77 
async77 
Task77 
<77 
ActionResult77 &
>77& '
Post77( ,
(77, -
[77- .
FromBody77. 6
]776 7%
VaccinationForCreationDto777 P
vaccination77Q \
)77\ ]
{88 	
await99 
_service99 
.99 
Create99 !
(99! "
vaccination99" -
)99- .
;99. /
return;; 
Ok;; 
(;; 
);; 
;;; 
}<< 	
[?? 	

HttpDelete??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
async@@ 
Task@@ 
<@@ 
ActionResult@@ &
<@@& '
VaccinationDto@@' 5
>@@5 6
>@@6 7
Delete@@8 >
(@@> ?
long@@? C
id@@D F
)@@F G
{AA 	
varBB 
vaccinationBB 
=BB 
awaitBB #
_serviceBB$ ,
.BB, -
GetByIdBB- 4
(BB4 5
idBB5 7
)BB7 8
;BB8 9
ifCC 
(CC 
vaccinationCC 
==CC 
nullCC #
)CC# $
{DD 
returnEE 
NotFoundEE 
(EE  
)EE  !
;EE! "
}FF 
awaitHH 
_serviceHH 
.HH 
DeleteHH !
(HH! "
idHH" $
)HH$ %
;HH% &
returnJJ 
OkJJ 
(JJ 
vaccinationJJ !
)JJ! "
;JJ" #
}KK 	
}LL 
}MM ∞!
VC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Controllers\VideoController.cs
	namespace		 	
Api		
 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
VideoController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IVideoService &
_videoService' 4
;4 5
public 
VideoController 
( 
IVideoService ,
videoService- 9
)9 :
{ 	
_videoService 
= 
videoService (
;( )
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str -
)- .
]. /
[ 	

HttpDelete	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
>& '
DeleteVideo( 3
(3 4
int4 7
id8 :
): ;
{ 	
try 
{ 
await 
_videoService #
.# $
Delete$ *
(* +
id+ -
)- .
;. /
} 
catch 
( 
	Exception 
ex 
)  
{ 
return 

BadRequest !
(! "
ex" $
.$ %
Message% ,
), -
;- .
}   
return!! 
Ok!! 
(!! 
)!! 
;!! 
}"" 	
[## 	
	Authorize##	 
(## 
Roles## 
=## 
$str## -
)##- .
]##. /
[$$ 	
Route$$	 
($$ 
$str$$ 9
)$$9 :
]$$: ;
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
>&&& ')
CreateVideoWithExistingAnimal&&( E
(&&E F
	IFormFile&&F O
video&&P U
,&&U V
long&&W [
animalId&&\ d
)&&d e
{'' 	
try(( 
{)) 
await** 
_videoService** #
.**# $)
CreateVideoWithExistingAnimal**$ A
(**A B
video**B G
,**G H
animalId**I Q
)**Q R
;**R S
}++ 
catch,, 
(,, 
	Exception,, 
ex,, 
),,  
{-- 
return.. 

BadRequest.. !
(..! "
ex.." $
...$ %
Message..% ,
).., -
;..- .
}// 
return00 
Ok00 
(00 
)00 
;00 
}11 	
[22 	
	Authorize22	 
(22 
Roles22 
=22 
$str22 -
)22- .
]22. /
[33 	
Route33	 
(33 
$str33 :
)33: ;
]33; <
[44 	
HttpPost44	 
]44 
public55 
async55 
Task55 
<55 
ActionResult55 &
>55& '*
CreateImagesWithExistingAnimal55( F
(55F G
IList55G L
<55L M
	IFormFile55M V
>55V W
videos55X ^
,55^ _
long55` d
animalId55e m
)55m n
{66 	
try77 
{88 
await99 
_videoService99 #
.99# $*
CreateVideosWithExistingAnimal99$ B
(99B C
videos99C I
,99I J
animalId99K S
)99S T
;99T U
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);;  
{<< 
return== 

BadRequest== !
(==! "
ex==" $
.==$ %
Message==% ,
)==, -
;==- .
}>> 
return?? 
Ok?? 
(?? 
)?? 
;?? 
}@@ 	
}AA 
}BB ø
BC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Program.cs
	namespace 	
Api
 
{ 
static 

class 
Program 
{		 
public

 
static

 
void

 
Main

 
(

  
string

  &
[

& '
]

' (
args

) -
)

- .
{ 	
var 
configuration 
= 
new  # 
ConfigurationBuilder$ 8
(8 9
)9 :
. 
AddJsonFile 
( 
$str /
)/ 0
. 
Build 
( 
) 
; 
Log 
. 
Logger 
= 
new 
LoggerConfiguration 0
(0 1
)1 2
. 
ReadFrom 
. 
Configuration '
(' (
configuration( 5
)5 6
. 
WriteTo 
. 
RollingFile $
($ %
$str% D
,D E
outputTemplateF T
:T U
$str	V û
)
û ü
. 
CreateLogger 
( 
) 
;  
Log 
. 
Information 
( 
$str 0
)0 1
;1 2
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. 

UseSerilog 
( 
) 
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
}   
}!! íπ
BC:\Users\Admin\Desktop\lv-epmrduapap\AnimalsProject\Api\Startup.cs
	namespace!! 	
Api!!
 
{"" 
public## 

class## 
Startup## 
{$$ 
public%% 
Startup%% 
(%% 
IConfiguration%% %
configuration%%& 3
)%%3 4
{&& 	
Configuration'' 
='' 
configuration'' )
;'') *
}(( 	
public** 
IConfiguration** 
Configuration** +
{**, -
get**. 1
;**1 2
}**3 4
public-- 
void-- 
ConfigureServices-- %
(--% &
IServiceCollection--& 8
services--9 A
)--A B
{.. 	
services// 
.// 
AddCors// 
(// 
)// 
;// 
services00 
.00 
	Configure00 
<00 
CookiePolicyOptions00 2
>002 3
(003 4
options004 ;
=>00< >
{11 
options22 
.22 
CheckConsentNeeded22 *
=22+ ,
context22- 4
=>225 7
true228 <
;22< =
options33 
.33 !
MinimumSameSitePolicy33 -
=33. /
SameSiteMode330 <
.33< =
None33= A
;33A B
}44 
)44 
;44 
services55 
.55 
AddSwaggerGen55 "
(55" #
c55# $
=>55% '
{66 
c77 
.77 

SwaggerDoc77 
(77 
$str77 !
,77! "
new77# &
OpenApiInfo77' 2
{88 
Version99 
=99 
$str99 "
,99" #
Title:: 
=:: 
$str:: !
,::! "
Description;; 
=;;  !
$str;;" B
}<< 
)<< 
;<< 
}>> 
)>> 
;>> 
services?? 
.?? 
AddControllers?? #
(??# $
)??$ %
;??% &
servicesAA 
.AA 
AddDbContextAA !
<AA! "
AnimalContextAA" /
>AA/ 0
(AA0 1
cfgAA1 4
=>AA5 7
{BB 
cfgCC 
.CC 
UseSqlServerCC  
(CC  !
ConfigurationDD !
.EE 
GetConnectionStringEE (
(EE( )
$strEE) H
)EEH I
)EEI J
;EEJ K
}FF 
)FF 
;FF 
servicesHH 
.HH 
AddIdentityHH  
<HH  !
UserHH! %
,HH% &
IdentityRoleHH' 3
>HH3 4
(HH4 5
optionsII 
=>II 
{JJ 
optionsKK 
.KK 
SignInKK $
.KK$ %#
RequireConfirmedAccountKK% <
=KK= >
trueKK? C
;KKC D
optionsLL 
.LL 
UserLL "
.LL" #
RequireUniqueEmailLL# 5
=LL6 7
trueLL8 <
;LL< =
optionsMM 
.MM 
PasswordMM &
.MM& '"
RequireNonAlphanumericMM' =
=MM> ?
falseMM@ E
;MME F
}NN 
)NN 
.OO $
AddEntityFrameworkStoresOO -
<OO- .
AnimalContextOO. ;
>OO; <
(OO< =
)OO= >
.PP $
AddDefaultTokenProvidersPP -
(PP- .
)PP. /
;PP/ 0#
JwtSecurityTokenHandlerRR #
.RR# $&
DefaultInboundClaimTypeMapRR$ >
.RR> ?
ClearRR? D
(RRD E
)RRE F
;RRF G
servicesSS 
.SS 
AddAuthenticationSS &
(SS& '
optionsSS' .
=>SS/ 1
{TT 
optionsUU 
.UU %
DefaultAuthenticateSchemeUU 5
=UU6 7
JwtBearerDefaultsUU8 I
.UUI J 
AuthenticationSchemeUUJ ^
;UU^ _
optionsVV 
.VV 
DefaultSchemeVV )
=VV* +
JwtBearerDefaultsVV, =
.VV= > 
AuthenticationSchemeVV> R
;VVR S
optionsWW 
.WW "
DefaultChallengeSchemeWW 2
=WW3 4
JwtBearerDefaultsWW5 F
.WWF G 
AuthenticationSchemeWWG [
;WW[ \
}XX 
)XX 
.XX 
AddJwtBearerXX 
(XX  
cfgXX  #
=>XX$ &
{YY 
cfgZZ 
.ZZ  
RequireHttpsMetadataZZ ,
=ZZ- .
falseZZ/ 4
;ZZ4 5
cfg[[ 
.[[ 
	SaveToken[[ !
=[[" #
true[[$ (
;[[( )
cfg\\ 
.\\ %
TokenValidationParameters\\ 1
=\\2 3
new\\4 7%
TokenValidationParameters\\8 Q
{]] 
ValidIssuer^^ #
=^^$ %
Configuration^^& 3
[^^3 4
$str^^4 G
]^^G H
,^^H I
ValidAudience__ %
=__& '
Configuration__( 5
[__5 6
$str__6 I
]__I J
,__J K
IssuerSigningKey`` (
=``) *
new``+ . 
SymmetricSecurityKey``/ C
(``C D
Encoding``D L
.``L M
UTF8``M Q
.``Q R
GetBytes``R Z
(``Z [
Configuration``[ h
[``h i
$str``i y
]``y z
)``z {
)``{ |
,``| }
	ClockSkewaa !
=aa" #
TimeSpanaa$ ,
.aa, -
Zeroaa- 1
}bb 
;bb 
}cc 
)cc 
;cc 
servicesee 
.ee "
AddHttpContextAccessoree +
(ee+ ,
)ee, -
;ee- .
vargg 
mappingConfiggg 
=gg 
newgg  #
MapperConfigurationgg$ 7
(gg7 8
mcgg8 :
=>gg; =
{hh 
mcii 
.ii 

AddProfileii 
(ii 
newii !
AnimalMapperii" .
(ii. /
)ii/ 0
)ii0 1
;ii1 2
}jj 
)jj 
;jj 
IMapperkk 
mapperkk 
=kk 
mappingConfigkk *
.kk* +
CreateMapperkk+ 7
(kk7 8
)kk8 9
;kk9 :
servicesll 
.ll 
AddSingletonll !
(ll! "
mapperll" (
)ll( )
;ll) *
servicesnn 
.nn 
	AddScopednn 
(nn 
typeofnn %
(nn% &
IRepositorynn& 1
<nn1 2
>nn2 3
)nn3 4
,nn4 5
typeofnn6 <
(nn< =

Repositorynn= G
<nnG H
>nnH I
)nnI J
)nnJ K
;nnK L
servicesoo 
.oo 
AddTransientoo !
<oo! ")
IAnimalLocationHistoryServiceoo" ?
,oo? @(
AnimalLocationHistoryServiceooA ]
>oo] ^
(oo^ _
)oo_ `
;oo` a
servicespp 
.pp 
AddTransientpp !
<pp! "
IEmailServicepp" /
,pp/ 0
EmailServicepp1 =
>pp= >
(pp> ?
)pp? @
;pp@ A
servicesqq 
.qq 
AddTransientqq !
<qq! "
IEmailHelperqq" .
,qq. /
EmailHelperqq0 ;
>qq; <
(qq< =
)qq= >
;qq> ?
servicesrr 
.rr 
AddTransientrr !
<rr! "
IHelpServicerr" .
,rr. /
HelpServicerr0 ;
>rr; <
(rr< =
)rr= >
;rr> ?
servicesss 
.ss 
AddTransientss !
<ss! "
IUserHelpServicess" 2
,ss2 3
UserHelpServicess4 C
>ssC D
(ssD E
)ssE F
;ssF G
servicestt 
.tt 
AddTransienttt !
<tt! "
ITokenServicett" /
,tt/ 0
TokenServicett1 =
>tt= >
(tt> ?
)tt? @
;tt@ A
servicesuu 
.uu 
AddTransientuu !
<uu! "
IUserServiceuu" .
,uu. /
UserServiceuu0 ;
>uu; <
(uu< =
)uu= >
;uu> ?
servicesvv 
.vv 
AddTransientvv !
<vv! "
IMainAdminServicevv" 3
,vv3 4
MainAdminServicevv5 E
>vvE F
(vvF G
)vvG H
;vvH I
servicesww 
.ww 
AddTransientww !
<ww! "
IRoleServiceww" .
,ww. /
RoleServiceww0 ;
>ww; <
(ww< =
)ww= >
;ww> ?
servicesxx 
.xx 
	AddScopedxx 
<xx 
IAnimalServicexx -
,xx- .
AnimalServicexx/ <
>xx< =
(xx= >
)xx> ?
;xx? @
servicesyy 
.yy 
	AddScopedyy 
<yy 
IDefectServiceyy -
,yy- .
DefectServiceyy/ <
>yy< =
(yy= >
)yy> ?
;yy? @
serviceszz 
.zz 
	AddScopedzz 
<zz 
IAddressServicezz .
,zz. /
AddressServicezz0 >
>zz> ?
(zz? @
)zz@ A
;zzA B
services{{ 
.{{ 
	AddScoped{{ 
<{{ 
IAttitudeToService{{ 1
,{{1 2
AttitudeToService{{3 D
>{{D E
({{E F
){{F G
;{{G H
services|| 
.|| 
	AddScoped|| 
<|| 
ICategoryService|| /
,||/ 0
CategoryService||1 @
>||@ A
(||A B
)||B C
;||C D
services}} 
.}} 
	AddScoped}} 
<}} 
IFoodService}} +
,}}+ ,
FoodService}}- 8
>}}8 9
(}}9 :
)}}: ;
;}}; <
services~~ 
.~~ 
	AddScoped~~ 
<~~ 
IStatusService~~ -
,~~- .
StatusService~~/ <
>~~< =
(~~= >
)~~> ?
;~~? @
services 
. 
	AddScoped 
< 
IKeepingService .
,. /
KeepingService0 >
>> ?
(? @
)@ A
;A B
services
ÄÄ 
.
ÄÄ 
	AddScoped
ÄÄ 
<
ÄÄ 
INeedsService
ÄÄ ,
,
ÄÄ, -
NeedsService
ÄÄ. :
>
ÄÄ: ;
(
ÄÄ; <
)
ÄÄ< =
;
ÄÄ= >
services
ÅÅ 
.
ÅÅ 
	AddScoped
ÅÅ 
<
ÅÅ  
IProcessingService
ÅÅ 1
,
ÅÅ1 2
ProcessingService
ÅÅ3 D
>
ÅÅD E
(
ÅÅE F
)
ÅÅF G
;
ÅÅG H
services
ÇÇ 
.
ÇÇ 
	AddScoped
ÇÇ 
<
ÇÇ !
IVaccinationService
ÇÇ 2
,
ÇÇ2 3 
VaccinationService
ÇÇ4 F
>
ÇÇF G
(
ÇÇG H
)
ÇÇH I
;
ÇÇI J
services
ÉÉ 
.
ÉÉ 
	AddScoped
ÉÉ 
<
ÉÉ 
IIsNewService
ÉÉ ,
,
ÉÉ, -
IsNewService
ÉÉ. :
>
ÉÉ: ;
(
ÉÉ; <
)
ÉÉ< =
;
ÉÉ= >
services
ÑÑ 
.
ÑÑ 
	AddScoped
ÑÑ 
<
ÑÑ 
IArticleService
ÑÑ .
,
ÑÑ. /
ArticleService
ÑÑ0 >
>
ÑÑ> ?
(
ÑÑ? @
)
ÑÑ@ A
;
ÑÑA B
services
ÖÖ 
.
ÖÖ 
	AddScoped
ÖÖ 
<
ÖÖ !
ICurrentUserService
ÖÖ 2
,
ÖÖ2 3 
CurrentUserService
ÖÖ4 F
>
ÖÖF G
(
ÖÖG H
)
ÖÖH I
;
ÖÖI J
services
ÜÜ 
.
ÜÜ 
	AddScoped
ÜÜ 
<
ÜÜ 
IOrderService
ÜÜ ,
,
ÜÜ, -
OrderService
ÜÜ. :
>
ÜÜ: ;
(
ÜÜ; <
)
ÜÜ< =
;
ÜÜ= >
services
áá 
.
áá 
	AddScoped
áá 
<
áá 
IBookOrderService
áá 0
,
áá0 1
BookOrderService
áá2 B
>
ááB C
(
ááC D
)
ááD E
;
ááE F
services
àà 
.
àà 
	AddScoped
àà 
<
àà  
IBookedTimeService
àà 1
,
àà1 2
BookedTimeService
àà3 D
>
ààD E
(
ààE F
)
ààF G
;
ààG H
services
ââ 
.
ââ 
	AddScoped
ââ 
<
ââ  
IAdoptOrderService
ââ 1
,
ââ1 2
AdoptOrderService
ââ3 D
>
ââD E
(
ââE F
)
ââF G
;
ââG H
services
ää 
.
ää 
	AddScoped
ää 
<
ää 
IVideoService
ää ,
,
ää, -
VideoService
ää. :
>
ää: ;
(
ää; <
)
ää< =
;
ää= >
services
ãã 
.
ãã 
	AddScoped
ãã 
<
ãã !
IDescriptionService
ãã 2
,
ãã2 3 
DescriptionService
ãã4 F
>
ããF G
(
ããG H
)
ããH I
;
ããI J
services
åå 
.
åå 
	AddScoped
åå 
<
åå 
IBreedService
åå ,
,
åå, -
BreedService
åå. :
>
åå: ;
(
åå; <
)
åå< =
;
åå= >
services
çç 
.
çç 
	AddScoped
çç 
<
çç 
IImageService
çç ,
,
çç, - 
AnimalImageService
çç. @
>
çç@ A
(
ççA B
)
ççB C
;
ççC D
services
éé 
.
éé 
	AddScoped
éé 
<
éé &
IAdoptBookRequestService
éé 7
,
éé7 8%
AdoptBookRequestService
éé9 P
>
ééP Q
(
ééQ R
)
ééR S
;
ééS T
services
èè 
.
èè 
	AddScoped
èè 
<
èè 
IStatisticService
èè 0
<
èè0 1
Animal
èè1 7
>
èè7 8
,
èè8 9
StatisticService
èè: J
<
èèJ K
Animal
èèK Q
>
èèQ R
>
èèR S
(
èèS T
)
èèT U
;
èèU V
services
êê 
.
êê 
	AddScoped
êê 
<
êê 
IStatisticService
êê 0
<
êê0 1
Article
êê1 8
>
êê8 9
,
êê9 :
StatisticService
êê; K
<
êêK L
Article
êêL S
>
êêS T
>
êêT U
(
êêU V
)
êêV W
;
êêW X
services
ëë 
.
ëë 
	AddScoped
ëë 
<
ëë (
IAnimalViewLocationService
ëë 9
,
ëë9 :'
AnimalViewLocationService
ëë; T
>
ëëT U
(
ëëU V
)
ëëV W
;
ëëW X
services
íí 
.
íí 
	AddScoped
íí 
<
íí 
IFilterService
íí -
<
íí- .
Article
íí. 5
,
íí5 6
ArticleQuery
íí7 C
>
ííC D
,
ííD E"
ArticleFilterService
ííF Z
>
ííZ [
(
íí[ \
)
íí\ ]
;
íí] ^
services
ìì 
.
ìì 
	AddScoped
ìì 
<
ìì 
IFilterService
ìì -
<
ìì- .
Animal
ìì. 4
,
ìì4 5
AnimalQuery
ìì6 A
>
ììA B
,
ììB C!
AnimalFilterService
ììD W
>
ììW X
(
ììX Y
)
ììY Z
;
ììZ [
services
ññ 
.
ññ 
AddSingleton
ññ !
<
ññ! "
IUriService
ññ" -
>
ññ- .
(
ññ. /
provider
ññ/ 7
=>
ññ8 :
{
óó 
var
òò 
accessor
òò 
=
òò 
provider
òò '
.
òò' ( 
GetRequiredService
òò( :
<
òò: ;"
IHttpContextAccessor
òò; O
>
òòO P
(
òòP Q
)
òòQ R
;
òòR S
var
ôô 
request
ôô 
=
ôô 
accessor
ôô &
.
ôô& '
HttpContext
ôô' 2
.
ôô2 3
Request
ôô3 :
;
ôô: ;
var
öö 
absoluteUri
öö 
=
öö  !
string
öö" (
.
öö( )
Concat
öö) /
(
öö/ 0
request
öö0 7
.
öö7 8
Scheme
öö8 >
,
öö> ?
$str
öö@ E
,
ööE F
request
ööG N
.
ööN O
Host
ööO S
.
ööS T
ToUriComponent
ööT b
(
ööb c
)
ööc d
,
ööd e
$str
ööf i
)
ööi j
;
ööj k
absoluteUri
õõ 
+=
õõ 
$str
õõ $
;
õõ$ %
return
úú 
new
úú 

UriService
úú %
(
úú% &
absoluteUri
úú& 1
)
úú1 2
;
úú2 3
}
ùù 
)
ùù 
;
ùù 
services
ûû 
.
ûû 
AddSingleton
ûû !
(
ûû! "
x
ûû" #
=>
ûû$ &
new
ûû' *
BlobServiceClient
ûû+ <
(
ûû< =
Configuration
ûû= J
.
ûûJ K
GetValue
ûûK S
<
ûûS T
string
ûûT Z
>
ûûZ [
(
ûû[ \
$str
ûû\ ~
)
ûû~ 
)ûû Ä
)ûûÄ Å
;ûûÅ Ç
services
üü 
.
üü 
AddSingleton
üü !
<
üü! "
IBlobService
üü" .
,
üü. /
BlobService
üü0 ;
>
üü; <
(
üü< =
)
üü= >
;
üü> ?
services
†† 
.
†† 
AddSingleton
†† !
<
††! "$
IActionContextAccessor
††" 8
,
††8 9#
ActionContextAccessor
††: O
>
††O P
(
††P Q
)
††Q R
;
††R S
services
°° 
.
°° -
AddApplicationInsightsTelemetry
°° 4
(
°°4 5
)
°°5 6
;
°°6 7
services
¢¢ 
.
¢¢ 
	AddScoped
¢¢ 
<
¢¢ #
AnimalStatisticFilter
¢¢ 4
>
¢¢4 5
(
¢¢5 6
)
¢¢6 7
;
¢¢7 8
services
££ 
.
££ 
	AddScoped
££ 
<
££ $
ArticleStatisticFilter
££ 5
>
££5 6
(
££6 7
)
££7 8
;
££8 9
}
§§ 	
public
ßß 
void
ßß 
	Configure
ßß 
(
ßß !
IApplicationBuilder
ßß 1
app
ßß2 5
,
ßß5 6!
IWebHostEnvironment
ßß7 J
env
ßßK N
,
ßßN O
IServiceProvider
ßßP `
provider
ßßa i
)
ßßi j
{
®® 	
if
©© 
(
©© 
env
©© 
.
©© 
IsDevelopment
©© !
(
©©! "
)
©©" #
)
©©# $
{
™™ 
app
´´ 
.
´´ '
UseDeveloperExceptionPage
´´ -
(
´´- .
)
´´. /
;
´´/ 0
}
¨¨ 
app
ÆÆ 
.
ÆÆ !
UseHttpsRedirection
ÆÆ #
(
ÆÆ# $
)
ÆÆ$ %
;
ÆÆ% &
app
ØØ 
.
ØØ 
UseStaticFiles
ØØ 
(
ØØ 
)
ØØ  
;
ØØ  !
app
∞∞ 
.
∞∞ 

UseRouting
∞∞ 
(
∞∞ 
)
∞∞ 
;
∞∞ 
app
±± 
.
±± 

UseSwagger
±± 
(
±± 
)
±± 
;
±± 
app
≤≤ 
.
≤≤ &
UseSerilogRequestLogging
≤≤ (
(
≤≤( )
)
≤≤) *
;
≤≤* +
app
¥¥ 
.
¥¥ 
UseSwaggerUI
¥¥ 
(
¥¥ 
c
¥¥ 
=>
¥¥ !
{
µµ 
c
∂∂ 
.
∂∂ 
SwaggerEndpoint
∂∂ !
(
∂∂! "
$str
∂∂" <
,
∂∂< =
$str
∂∂> K
)
∂∂K L
;
∂∂L M
}
∑∑ 
)
∑∑ 
;
∑∑ 
app
ππ 
.
ππ 
UseCors
ππ 
(
ππ 
builder
ππ 
=>
ππ  "
builder
ππ# *
.
∫∫ 
WithOrigins
∫∫ 
(
∫∫ 
Configuration
∫∫ &
[
∫∫& '
$str
∫∫' G
]
∫∫G H
,
∫∫H I
Configuration
∫∫J W
[
∫∫W X
$str
∫∫X ~
]
∫∫~ 
)∫∫ Ä
.
ªª 
AllowCredentials
ªª 
(
ªª 
)
ªª 
.
ºº 
AllowAnyHeader
ºº 
(
ºº 
)
ºº 
.
ΩΩ 
AllowAnyMethod
ΩΩ 
(
ΩΩ 
)
ΩΩ 
)
ΩΩ 
;
ΩΩ 
app
øø 
.
øø 
UseMiddleware
øø 
<
øø 
TokenMiddleware
øø -
>
øø- .
(
øø. /
)
øø/ 0
;
øø0 1
app
¿¿ 
.
¿¿ 
UseAuthentication
¿¿ !
(
¿¿! "
)
¿¿" #
;
¿¿# $
app
¡¡ 
.
¡¡ 
UseAuthorization
¡¡  
(
¡¡  !
)
¡¡! "
;
¡¡" #
app
√√ 
.
√√ 
UseEndpoints
√√ 
(
√√ 
	endpoints
√√ &
=>
√√' )
{
ƒƒ 
	endpoints
≈≈ 
.
≈≈ 
MapControllers
≈≈ (
(
≈≈( )
)
≈≈) *
;
≈≈* +
}
∆∆ 
)
∆∆ 
;
∆∆ 
SeedUserPasswords
»» 
(
»» 
provider
»» &
)
»»& '
.
»»' (
Wait
»»( ,
(
»», -
)
»»- .
;
»». /
}
…… 	
private
ÀÀ 
async
ÀÀ 
Task
ÀÀ 
SeedUserPasswords
ÀÀ ,
(
ÀÀ, -
IServiceProvider
ÀÀ- =
provider
ÀÀ> F
)
ÀÀF G
{
ÃÃ 	
var
ÕÕ 
userManager
ÕÕ 
=
ÕÕ 
provider
ÕÕ &
.
ÕÕ& ' 
GetRequiredService
ÕÕ' 9
<
ÕÕ9 :
UserManager
ÕÕ: E
<
ÕÕE F
User
ÕÕF J
>
ÕÕJ K
>
ÕÕK L
(
ÕÕL M
)
ÕÕM N
;
ÕÕN O
var
ŒŒ 
users
ŒŒ 
=
ŒŒ 
new
ŒŒ 
User
ŒŒ  
[
ŒŒ  !
]
ŒŒ! "
{
œœ 
await
–– 
userManager
–– !
.
––! "
FindByIdAsync
––" /
(
––/ 0
$str
––0 3
)
––3 4
,
––4 5
await
—— 
userManager
—— !
.
——! "
FindByIdAsync
——" /
(
——/ 0
$str
——0 3
)
——3 4
}
““ 
;
““ 
foreach
”” 
(
”” 
var
”” 
user
”” 
in
””  
users
””! &
)
””& '
{
‘‘ 
await
’’ 
AssignPassword
’’ $
(
’’$ %
user
’’% )
,
’’) *
userManager
’’+ 6
)
’’6 7
;
’’7 8
}
÷÷ 
}
◊◊ 	
private
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
IdentityResult
ŸŸ )
>
ŸŸ) *
AssignPassword
ŸŸ+ 9
(
ŸŸ9 :
User
ŸŸ: >
user
ŸŸ? C
,
ŸŸC D
UserManager
ŸŸE P
<
ŸŸP Q
User
ŸŸQ U
>
ŸŸU V
manager
ŸŸW ^
)
ŸŸ^ _
{
⁄⁄ 	
if
€€ 
(
€€ 
user
€€ 
!=
€€ 
null
€€ 
&&
€€ 
user
€€  $
.
€€$ %
PasswordHash
€€% 1
==
€€2 4
null
€€5 9
)
€€9 :
{
‹‹ 
return
›› 
await
›› 
manager
›› $
.
››$ %
AddPasswordAsync
››% 5
(
››5 6
user
››6 :
,
››: ;
$str
››< F
)
››F G
;
››G H
}
ﬁﬁ 
return
ﬂﬂ 
null
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 	
}
‚‚ 
}„„ 